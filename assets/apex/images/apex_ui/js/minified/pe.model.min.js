pe=function(a,b,c,d,e,f,g){"use strict";function h(a){var b=d.getMessage("MODEL."+a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.format.apply(this,c)}function i(a){var b=d.getMessage("MODEL."+a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.formatNoEscape.apply(this,c)}function k(a,b,c){return c?i(a,b):b}function l(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function m(a,b){for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);for(var c in a)a.hasOwnProperty(c)&&a[c]===g&&delete a[c]}function n(a){for(var b=a;b.length<36;)b="0"+b;return b}function o(a){return/^[ABCDEFGHIJKLMNOPQRSTUVWXYZ]+[ABCDEFGHIJKLMNOPQRSTUVWXYZ0-9_$]*$/.test(a)?a:'"'+a+'"'}function p(b,c){function e(b,c,e){var f,i,j,k=aa[e],l=k.pluginType;if(l.plugins=l.plugins||{},b!==g)for(var n=0;n<b.length;n++){if(l.plugins[b[n].name]={name:b[n].name,title:d.formatNoEscape(c,b[n].title),category:b[n].category,uiTypes:b[n].uiTypes,attributes:b[n].attributes,stdAttributes:b[n].stdAttributes,sqlMinColumns:b[n].sqlMinColumns,sqlMaxColumns:b[n].sqlMaxColumns,sqlExamples:b[n].sqlExamples,aboutUrl:b[n].aboutUrl,helpText:b[n].helpText||h("HELP.NO_TEXT"),isQuickPick:b[n].isQuickPick===!0,isLegacy:b[n].isLegacy===!0,isRequired:-1!==a.inArray("SOURCE_REQUIRED",b[n].stdAttributes)||-1!==a.inArray("LOV_REQUIRED",b[n].stdAttributes)||-1!==a.inArray("REQUIRED",b[n].stdAttributes)||-1!==a.inArray("REGION_REQUIRED",b[n].stdAttributes)},b[n].hasOwnProperty("stdAttributes")){for(var o=0;o<b[n].stdAttributes.length;o++)if(f=b[n].stdAttributes[o],l.stdAttributes.hasOwnProperty(f))for(var p=0;p<l.stdAttributes[f].length;p++)i=l.stdAttributes[f][p],k.properties[i].dependingOn[0].values.push(b[n].name);e===ia.PAGE_ITEM&&-1===a.inArray("FORMAT_MASK_DATE",b[n].stdAttributes)&&-1===a.inArray("FORMAT_MASK_NUMBER",b[n].stdAttributes)&&k.properties[ja.FORMAT_MASK].dependingOn[0].values.push(b[n].name)}if(e!==ia.REGION){for(var o=0;o<b[n].attributes.length;o++)m(b[n].attributes[o],{scope:"COMPONENT",defaultValue:"",helpText:""}),j=b[n].attributes[o],(e!==ia.REGION_COLUMN&&"COMPONENT"===j.scope||e===ia.REGION_COLUMN&&"COLUMN"===j.scope)&&(_[j.id]={id:j.id,name:e+"_"+b[n].name+"_"+j.mappingNo,prompt:j.prompt,type:j.type,multiValueDelimiter:j.multiValueDelimiter,displayLen:j.displayLen,maxLen:j.maxLen,textCase:j.textCase,unit:j.unit,hasPlSqlCheck:!1,sqlMinColumns:j.sqlMinColumns,sqlMaxColumns:j.sqlMaxColumns,dataTypes:j.dataTypes||{},displayGroupId:j.displayGroupId,lovType:j.lovType,lovComponentTypeId:j.lovComponentTypeId,lovComponentScope:j.lovComponentScope,lovValues:j.lovValues,isSearchable:j.isSearchable,legacyValues:j.legacyValues,examples:j.examples,helpText:j.helpText,isCustomPluginAttribute:/^PLUGIN/.test(b[n].name)},j.hasOwnProperty("uiTypes")&&(_[j.id].uiTypes=j.uiTypes),_[j.id].type===oa.YES_NO&&(_[j.id].yesValue="Y",_[j.id].noValue="N"),k.properties[j.id]={propertyId:j.id,displaySeq:l.attributesSeqOffset+j.displaySeq,isRequired:j.isRequired,isReadOnly:!1,isCommon:j.isCommon,nullText:j.nullText,referenceOnDelete:j.referenceOnDelete,referenceScope:j.referenceScope,supportsSubstitution:j.supportsSubstitution,defaultValue:j.defaultValue,dependingOn:[{id:l.typePropertyId,type:"EQUALS",expression:b[n].name}]},j.parentAttribute&&(k.properties[j.id].parentProperty=j.parentAttribute),j.dependingOn&&k.properties[j.id].dependingOn.push(j.dependingOn));if(e!==ia.REGION_COLUMN)for(var o=0;o<b[n].events.length;o++)ca.component.push({r:b[n].events[o].r,d:b[n].events[o].d+" ["+b[n].title+"]",uiTypes:b[n].uiTypes})}}}for(var f in b)b.hasOwnProperty(f)&&(e(b[f],c,f),f===ia.REGION&&(e(b[f],c,ia.REGION_PLUGIN_ATTR),e(b[f],c,ia.REGION_COLUMN)))}function q(){function a(a){l(a,function(a,b){b.displayPointsMap={};for(var c=0;c<b.displayPoints.length;c++)b.displayPointsMap[b.displayPoints[c].id]=b.displayPoints[c]})}for(var b in aa)if(aa.hasOwnProperty(b)){aa[b].id=b,m(aa[b],{parentId:null,isOneToOneRelation:!1,isPageComponent:!1,isSharedComponent:!1,refByProperties:[],childComponentTypes:[]}),ra[b]={};for(var c in aa[b].properties)aa[b].properties.hasOwnProperty(c)&&(aa[b].properties[c].propertyId=c,m(aa[b].properties[c],{defaultValue:"",helpText:"",dependingOn:[],refByChilds:[],refByDependingOn:[]}))}for(var b in _)if(_.hasOwnProperty(b)&&(_[b].id=b,m(_[b],{helpText:"",hasPlSqlCheck:!1,isQueryOnly:!1,isInternal:!1,isSearchable:!0,dataTypes:{},refByComponentTypes:[]}),_[b].hasOwnProperty("uiTypes")||(_[b].uiTypes=[na.DESKTOP,na.JQM_SMARTPHONE]),_[b].hasOwnProperty("lovValues"))){_[b].lovValuesMap={};for(var c=0;c<_[b].lovValues.length;c++)_[b].lovValuesMap[_[b].lovValues[c].r]=c}l(ca,function(a,b){if("lookupMap"!==a)for(var c=0;c<b.length;c++)ca.lookupMap[b[c].r]=b[c]}),l(ea.themes,function(b,c){a(c.templates[ia.PAGE_TEMPLATE]),a(c.templates[ia.REGION_TEMPLATE])})}function r(){var a;for(var b in _)_.hasOwnProperty(b)&&("COMPONENT"===_[b].lovType?aa[_[b].lovComponentTypeId].refByProperties.push(b):"ITEM"===_[b].type&&aa[ia.PAGE_ITEM].refByProperties.push(b));for(var c in aa)if(aa.hasOwnProperty(c)){null!==aa[c].parentId&&aa[aa[c].parentId].childComponentTypes.push(c);for(var d in aa[c].properties)if(aa[c].properties.hasOwnProperty(d)){a=aa[c].properties[d],_[d].refByComponentTypes.push(c),a.parentProperty&&a.parentProperty.id&&aa[a.parentProperty.typeId].properties[a.parentProperty.id].refByChilds.push({typeId:c,id:d});for(var b=0;b<a.dependingOn.length;b++)aa[c].properties[a.dependingOn[b].id].refByDependingOn.push(d)}}}function s(){var a,b,c="ORA_WWV_apex.builder.pageDesigner.model.componentIds";return a=localStorage[c],a=a===g?[]:a.split(","),0===a.length&&e.process("getNewComponentId",{x01:50},{success:function(b){a=b},async:!1}),b=a[0],a=a.slice(1),0===a.length?delete localStorage[c]:localStorage[c]=a.join(","),b}function t(){return ea.themes[ha.themeId]}function u(){var a,b,c=ra[ia.PAGE][ga];return a=t(),b=A()?a.defaultTemplates.page:"NORMAL"===c.getProperty(ja.PAGE_MODE).getValue()?c.getProperty(ja.PAGE_TEMPLATE).getValue()||a.defaultTemplates.page:c.getProperty(ja.DIALOG_TEMPLATE).getValue()||a.defaultTemplates.dialog,a.templates[ia.PAGE_TEMPLATE][b]}function v(a){var b=ra[ia.REGION][a].getProperty(ja.REGION_TEMPLATE).getValue(),c=t().templates[ia.REGION_TEMPLATE];return c.hasOwnProperty(b)?c[b]:c[""]}function w(a){var b=t().templates[ia.FIELD_TEMPLATE];return b.hasOwnProperty(a)?b[a]:b[""]}function x(b){var c,d,e,f=b.component.typeId,i=t().options||[],j=[],k={};if(f===ia.PAGE)e="PAGE",d=u();else if(c=b.component.getProperty(aa[b.component.typeId].properties[b.id].parentProperty.id),c&&""!==c.getValue())switch(d=t().templates[_[c.id].lovComponentTypeId][c.getValue()],_[c.id].lovComponentTypeId){case ia.REGION_TEMPLATE:e="REGION";break;case ia.REPORT_TEMPLATE:e="REPORT";break;case ia.BREADCRUMB_TEMPLATE:e="BREADCRUMB";break;case ia.LIST_TEMPLATE:e="LIST";break;case ia.FIELD_TEMPLATE:e="FIELD";break;case ia.BUTTON_TEMPLATE:e="BUTTON"}if(d===g)return{values:[],valuesMap:{},defaultValues:[],presetValues:[],groups:{}};d&&d.hasOwnProperty("options")&&(j=j.concat(d.options));for(var l=0;l<i.length;l++)-1!==a.inArray(e,i[l].types)&&j.push(i[l]);j.unshift({r:"#DEFAULT#",d:h("LOV.TEMPLATE_OPTIONS.DEFAULT"),description:h("LOV.TEMPLATE_OPTIONS.DEFAULT.DESC")});for(var l=0;l<j.length;l++)k[j[l].r]=j[l];return{values:j,valuesMap:k,defaultValues:d.defaultOptions||[],presetValues:d.presetOptions||[],groups:t().optionGroups||[]}}function y(b,c){return"ROWID"===b&&-1===a.inArray(b,c)?!1:0===c.length||b===g||a.inArray("VARCHAR2",c)>=0&&-1===a.inArray(b,["BLOB","BFILE"])||a.inArray("DATE",c)>=0&&a.inArray(b,["DATE","TIMESTAMP","TIMESTAMP_TZ","TIMESTAMP_LTZ"])>=0||a.inArray(b,c)>=0}function z(b,c){return-1!==a.inArray(b,c)}function A(){return ga===ha.globalPageId}function B(a,b){function c(a,b){-1!==d.indexOf(a)&&(d=d.replace(a,b()))}var d=b;return-1!==d.indexOf("#")&&(c("#PAGE_ID#",function(){return ga}),c("#PLEASE_CHANGE#",function(){return h("PLACEHOLDER.PLEASE_CHANGE")}),c("#PRINT_LINK_TEXT#",function(){return h("PLACEHOLDER.PRINT_LINK_TEXT")}),c("#DEFAULT_REGION_TEMPLATE#",function(){return t().defaultTemplates.region}),c("#DEFAULT_FIELD_TEMPLATE#",function(){return t().defaultTemplates.field}),c("#DEFAULT_BUTTON_TEMPLATE#",function(){return t().defaultTemplates.button}),c("#DEFAULT_REPORT_TEMPLATE#",function(){return t().defaultTemplates.report}),c("#DEFAULT_LIST_TEMPLATE#",function(){return t().defaultTemplates.list}),c("#DEFAULT_NAV_LIST_TEMPLATE#",function(){return ha.navList.templateId||""}),c("#DEFAULT_BREADCRUMB_TEMPLATE#",function(){return t().defaultTemplates.breadcrumb}),c("#DEFAULT_CALENDAR_TEMPLATE#",function(){return t().defaultTemplates.calendar}),c("#DEFAULT_NAV_LIST_POSITION#",function(){return ha.navList.position||""}),c("#PRESET_TEMPLATE_OPTIONS#",function(){var b=x(a).presetValues;return b.length>0?":"+b.join(":"):""})),d}function C(a,b,c){for(var d,e=[],f=0;f<a.length;f++)d=a[f].getProperty(b),e.push({name:a[f].getProperty(c).getValue(),label:d?d.getValue():""});return e}function D(a,b){var c,d,e=[];for(c=0;c<b.length;c++)if(d=a.getProperty(b[c])){e=d.getColumns();break}return e}function E(b){var c,d,e,f,g={NATIVE_TABFORM:ia.TAB_FORM_COLUMN,NATIVE_SQL_REPORT:ia.CLASSIC_RPT_COLUMN,NATIVE_FNC_REPORT:ia.CLASSIC_RPT_COLUMN,NATIVE_IR:ia.IR_COLUMN},h=[];return c=I(ia.REGION,{id:b}),c.length>0&&(d=c[0],e=d._properties[ja.REGION_TYPE]._value,g.hasOwnProperty(e)?(f="NATIVE_IR"===e?d.getChilds(ia.IR_ATTRIBUTES)[0].id:d.id,c=I(g[e],{parentId:f}),h=C(c,ja.COLUMN_HEADING,ja.COLUMN_NAME)):-1!==a.inArray("COLUMNS",aa[ia.REGION].pluginType.plugins[e].stdAttributes)?(c=I(ia.REGION_COLUMN,{parentId:d.id}),h=C(c,ja.COLUMN_HEADING,ja.COLUMN_NAME)):h=D(d,[ja.REGION_SQL,ja.REGION_FUNCTION_RETURNING_SQL])),h}function F(b){var c=b.propertyId,d=_[c],e=aa[b.component.typeId].properties[c],f=c;if(this.component=b.component,f instanceof F){f=a.extend(!0,{},f);for(var g in f)f.hasOwnProperty(g)&&"component"!==g&&(this[g]=f[g])}else this.id=c,this._isRequired=e.isRequired,this._isReadOnly=e.isReadOnly,d.type===oa.SQL&&(this._sqlMinColumns=d.sqlMinColumns,this._sqlMaxColumns=d.sqlMaxColumns),this._setDynamicProperties(),this.hasChanged=!1,this.errors=[],this.warnings=[],this._columns=[],this._hasOrderBy=!1,b.hasOwnProperty("server")?"object"===a.type(b.server)?(this._value=b.server.value,this._columns=b.server.columns||[],this._hasOrderBy=b.server.hasOrderBy):this._value=b.server:(this.hasChanged=!0,this._value=B(this,b.defaultValue||e.defaultValue),this._columns=b.columns||[],this._hasOrderBy=b.hasOrderBy,"UPPER"===d.textCase?this._value=this._value.toUpperCase():"LOWER"===d.textCase&&(this._value=this._value.toLowerCase()),this._setDynamicDefaultValue(),this._isRequired&&""===this._value&&this.errors.push(h("VAL.IS_REQUIRED")))}function G(b){var c,d;if(b.component instanceof G){d=a.extend(!0,{},b.component);for(var e in d)if(d.hasOwnProperty(e))if("_properties"===e){this._properties={};for(var f in d._properties)d._properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:d._properties[f]}))}else this[e]=d[e];if(b.isDetached)return;c=aa[this.typeId],c.isOneToOneRelation?this.id=b.parentId:this.id=s(),this._status=ma.CREATED,this.seq=0,this._isReadOnly=!1}else if(c=aa[b.typeId],this.id="",this.parentId="",this._status=ma.UNCHANGED,this._uiType=na.DESKTOP,this.typeId=b.typeId,this.seq=0,this._isReadOnly=!1,this._properties={},a.isPlainObject(b.component)){this.id=b.component.id,this.parentId=b.component.parentId,this.pageId=b.component.pageId,this._uiType=b.component.uiType||this._uiType,this._lock=b.component.lock||!1;for(var f in b.component.properties)b.component.properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f,server:b.component.properties[f]}),f===c.seqPropertyId&&(this.seq=parseInt(b.component.properties[f],10)));for(var f in c.properties)c.properties.hasOwnProperty(f)&&!this._properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f,server:""}));if(this._cleanProperties(),b.isDetached)return}else{c.isOneToOneRelation?this.id=b.parentId:this.id=s(),this._status=ma.CREATED,ga&&(this._uiType=ra[ia.PAGE][ga]._uiType),c.isPageComponent&&(this.pageId=ga);for(var f in c.properties)c.properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f}));this._cleanProperties()}if(this._status===ma.CREATED){c=aa[this.typeId],b.parentId?(this.parentId=b.parentId,c.parentPropertyId&&this._properties[c.parentPropertyId]._setValue(this.parentId,{checkReadOnly:!1})):c.parentId===ia.PAGE?this.parentId=ga:c.parentId===ia.APPLICATION&&(this.parentId=fa);for(var f in this._properties)this._properties.hasOwnProperty(f)&&(this._properties[f].hasChanged=!0,c.properties[f].hasOwnProperty("checkUniqueness")&&this._properties[f]._setUniqueValue());this._setGridProperties(),this._setProperties(b.values,{checkReadOnly:!1}),0===this.seq&&c.seqPropertyId&&this._move(b.previousComponent),P(this,wa.CREATE),b.hasOwnProperty("component")?(this._callPluginCallback({properties:b.values}),this._callComponentTypeCallback({properties:b.values})):(this._callPluginCallback({action:la.CREATED}),this._callComponentTypeCallback({action:la.CREATED}))}ra[this.typeId][this.id]=this}function H(a){function b(b,c){for(var d=I(b,{properties:[{id:c,value:""}]},!1),e=0;e<d.length;e++)a!==g||d[e].isOnGlobalPage()||P(d[e],wa.CHANGE),d[e]._setGridProperties(a)}b(ia.REGION,ja.PARENT_REGION),b(ia.PAGE_ITEM,ja.REGION),b(ia.BUTTON,ja.REGION)}function I(b,c,d){var e,f,h=aa[b].isPageComponent,i=[];c=c||{};for(var j in ra[b])if(ra[b].hasOwnProperty(j)){if(e=ra[b][j],e._status===ma.DELETED)continue;if(c.hasOwnProperty("id")&&c.id!==g&&j!==c.id+"")continue;if(c.hasOwnProperty("parentId")&&c.parentId!==g&&e.parentId!==c.parentId+"")continue;if(c.hasOwnProperty("pageId")&&c.pageId!==g){if(e.pageId!==c.pageId)continue}else if(h&&e.pageId!==ga&&(c.excludeGlobalPage||!e.isOnGlobalPage()))continue;if(c.hasOwnProperty("hasChanged")&&c.hasChanged!==g&&e.hasChanged()!==c.hasChanged)continue;if(c.hasOwnProperty("hasErrors")&&c.hasErrors!==g&&e.hasErrors()!==c.hasErrors)continue;if(c.hasOwnProperty("hasWarnings")&&c.hasWarnings!==g&&e.hasWarnings()!==c.hasWarnings)continue;if(c.properties&&c.properties.length>0){f=!1;for(var k=0;k<c.properties.length&&(f=!1,e._properties.hasOwnProperty(c.properties[k].id)&&(f=c.properties[k].value instanceof RegExp?!!e._properties[c.properties[k].id]._value.match(c.properties[k].value):e._properties[c.properties[k].id]._value==c.properties[k].value),f);k++);if(!f)continue}if(a.isFunction(c.filterFunction)&&!c.filterFunction.apply(e))continue;i.push(e)}return d===!0||d===g?aa[b].seqPropertyId?i.sort(function(a,b){return a.seq===b.seq?n(a.id)>n(b.id)?1:-1:a.seq-b.seq}):i.sort(function(a,b){return a.getDisplayTitle().localeCompare(b.getDisplayTitle())}):a.isFunction(d)&&i.sort(d),i}function J(b,c){for(var d=[],e=0;e<b.length;e++)d=d.concat(I(b[e].typeId,b[e].filter,!1));return c===!0||c===g?d.sort(function(a,b){return aa[a.typeId].seqPropertyId&&aa[b.typeId].seqPropertyId?a.seq===b.seq?n(a.id)>n(b.id)?1:-1:a.seq-b.seq:a.getDisplayTitle().localeCompare(b.getDisplayTitle())}):a.isFunction(c)&&d.sort(c),d}function K(a,c){var d,e,f=[];if(a instanceof RegExp)e=a;else{if(""===a||a===g)return[];e=new RegExp(b.escapeRegExp(a),"i")}if(c.hasOwnProperty("typeId"))l(ra[c.typeId],function(a,b){b._status!==ma.DELETED&&l(b._properties,function(a,b){_[a].isSearchable&&b._value.match(e)&&f.push(b)})});else if(c.hasOwnProperty("properties"))for(var h=0;h<c.properties.length;h++)d=c.properties[h],_[d.id].isSearchable&&d._value.match(e)&&f.push(d);return f.sort(function(a,b){var c=a.component.getDisplayTitle(),d=b.component.getDisplayTitle();return c===d?aa[a.component.typeId].properties[a.id].displaySeq-aa[b.component.typeId].properties[b.id].displaySeq:c.localeCompare(d)}),f}function L(b,c){var d,f,g=[];if("application"===b.type){f=I(ia.APP_ITEM);for(var h=0;h<f.length;h++)g.push({name:f[h].getProperty(ja.ITEM_NAME).getValue()})}else if("page"===b.type){if(b.pageId!==ga&&b.pageId!==ha.globalPageId)return void e.process("getPageItems",{x01:b.pageId},{success:function(a){for(var b in a)g.push({name:b,label:a[b]});g.sort(function(a,b){return a.name.localeCompare(b.name)}),c(g)}});f=I(ia.PAGE_ITEM,{pageId:b.pageId}),g=C(f,ja.ITEM_LABEL,ja.ITEM_NAME)}else"columns"===b.type&&(d=b.component,-1!==a.inArray(d.typeId,[ia.REGION_PLUGIN_ATTR,ia.REGION_COLUMN,ia.IR_ATTRIBUTES,ia.CLASSIC_REPORT,ia.CLASSIC_RPT_COLUMN,ia.TABULAR_FORM,ia.TAB_FORM_COLUMN])?g=E(d.parentId):d.typeId===ia.IR_COLUMN?g=E(d.getParent().parentId):d.typeId===ia.VALIDATION?g=E(d.getProperty(ja.VALIDATION_REGION).getValue()):d.typeId===ia.PAGE_PROCESS?g=E(d.getProperty(ja.PROCESS_REGION).getValue()):d.typeId===ia.CHART_SERIES?g=D(d,[ja.PROJECT_GANTT_SOURCE_QUERY,ja.RESOURCE_GANTT_SOURCE_QUERY,ja.PIE_DOUGHNUT_SOURCE_QUERY,ja.DIAL_SOURCE_QUERY,ja.SCATTER_SOURCE_QUERY,ja.RANGE_SOURCE_QUERY,ja.CANDLESTICK_SOURCE_QUERY,ja.LINE_COL_BAR_STK_SOURCE_QUERY]):d.typeId===ia.MAP_CHART_SERIES&&(g=D(d,[ja.MAP_SOURCE_QUERY])));return c?void c(g):g}function M(a,b,c){e.process("getPages",{x01:c?"Y":"N",x02:a.show?a.show:"",x03:a.id?a.id:""},{success:b})}function N(){if(!xa)throw"Start a Transaction first!"}function O(){if(xa)throw"Finish pending Transaction first!"}function P(a,b){var c;N(),c=xa.components,c.hasOwnProperty(a.typeId)&&c[a.typeId].hasOwnProperty(a.id)?b===wa.DELETE&&(c[a.typeId][a.id].operation===wa.CREATE?delete c[a.typeId][a.id]:c[a.typeId][a.id].operation=b):(c.hasOwnProperty(a.typeId)||(c[a.typeId]={}),c[a.typeId][a.id]={oldComponent:null,newComponent:null,operation:b},b!==wa.CREATE&&(c[a.typeId][a.id].oldComponent=new G({component:a,isDetached:!0})))}function Q(b,c){function d(a,b){(c._properties.hasOwnProperty(a)||b===ka.REMOVE_PROP)&&(k.properties.hasOwnProperty(a)||(k.properties[a]=[]),k.properties[a].push(b))}function e(a,b,e){if(c[b]()){k.events.push(a);for(var f in c._properties)c._properties.hasOwnProperty(f)&&c._properties[f][e].length>0&&d(f,a)}}function f(a,d,e){c._properties[m][e].join()!==b._properties[m][e].join()&&(0===c._properties[m][e].length?l.push(d):l.push(a))}function g(a,d,e){c[e]()!==b[e]()&&(c[e]()?k.events.push(a):k.events.push(d))}var h,i,j,k,l;if(k={component:{},events:[],properties:{}},null===b||b._status===ma.DELETED)k.component=c,k.events.push(ka.CREATE),e(ka.ERRORS,"hasErrors","errors"),e(ka.WARNINGS,"hasWarnings","warnings");else if(null===c||c._status===ma.DELETED)k.component=b,k.events.push(ka.DELETE);else{k.component=c,k.events.push(ka.CHANGE),h=aa[c.typeId];for(var m in c._properties)if(c._properties.hasOwnProperty(m)){if(i=c._properties[m],l=k.properties[m]||[],b._properties.hasOwnProperty(m)){if(i._value!==b._properties[m]._value){if(l.push(ka.CHANGE),m===h.displayPropertyId?k.events.push(ka.DISPLAY_TITLE):(c.typeId===ia.PAGE&&(m===ja.PAGE_TEMPLATE||m===ja.DIALOG_TEMPLATE)||c.typeId===ia.REGION&&(m===ja.REGION_TEMPLATE||m===ja.REGION_TYPE))&&k.events.push(ka.GRID),h.pluginType&&m===h.pluginType.typePropertyId){for(var n=0;n<h.pluginType.requiredProperties.length;n++)d(h.pluginType.requiredProperties[n],ka.META_DATA);d(ja.LOV_SQL,ka.META_DATA)}-1!==a.inArray(c.typeId,[ia.REGION,ia.PAGE_ITEM,ia.BUTTON])&&-1!==a.inArray(m,[ja.PARENT_REGION,ja.REGION,ja.REGION_POSITION,ja.BUTTON_POSITION,ja.GRID_COLUMN,ja.GRID_COLUMN_SPAN])&&(d(ja.GRID_COLUMN,ka.META_DATA),d(ja.GRID_COLUMN_SPAN,ka.META_DATA),d(ja.GRID_LABEL_COLUMN_SPAN,ka.META_DATA))}if(f(ka.ERRORS,ka.NO_ERRORS,"errors"),f(ka.WARNINGS,ka.NO_WARNINGS,"warnings"),h.properties[m].refByChilds.length>0&&(i._value!==b._properties[m]._value||i._columns.length>0))for(var n=0;n<h.properties[m].refByChilds.length;n++)h.properties[m].refByChilds[n].typeId===c.typeId&&(j=h.properties[m].refByChilds[n].id,d(j,ka.META_DATA))}else l.push(ka.ADD_PROP),i.errors.length>0&&l.push(ka.ERRORS),i.warnings.length>0&&l.push(ka.WARNINGS),c.typeId!==ia.PAGE||m!==ja.PAGE_TEMPLATE&&m!==ja.DIALOG_TEMPLATE||k.events.push(ka.GRID);l.length>0&&(k.properties[m]=l)}for(var m in b._properties)b._properties.hasOwnProperty(m)&&(c._properties.hasOwnProperty(m)||d(m,ka.REMOVE_PROP));g(ka.ERRORS,ka.NO_ERRORS,"hasErrors"),g(ka.WARNINGS,ka.NO_WARNINGS,"hasWarnings")}return k}function R(b){function c(){var c,d,e,f,g,h,i=ta.slice();for(c=0;c<b.length;c++)for(g=b[c],d=0;d<i.length;d++){if(h=i[d].filter,f=!1,h.component)h.component instanceof G?h.component.typeId===g.component.typeId&&h.component.id===g.component.id&&(f=!0):h.component.typeId===g.component.typeId?f=!0:-1!==a.inArray(g.component.typeId,h.component.typeIds)&&(f=!0);else if(h.components){for(e=0;e<h.components.length;e++)if(h.components[e]instanceof G){if(h.components[e].typeId===g.component.typeId&&h.components[e].id===g.component.id){f=!0;break}}else if(h.components[e].typeId===g.component.typeId){f=!0;break}}else f=!0;if(f&&h.properties.length>0)for(f=!1,e=0;e<h.properties.length;e++)if(g.properties.hasOwnProperty(h.properties[e])){f=!0;break}if(f&&h.events.length>0)for(f=!1,e=0;e<h.events.length;e++){if(-1!==a.inArray(h.events[e],g.events)){f=!0;break}for(var j in g.properties)if(g.properties.hasOwnProperty(j)&&-1!==a.inArray(h.events[e],g.properties[j])){f=!0;break}if(f)break}f&&(i[d].sendInBulk?i[d].pendingNotifications.push(g):i[d].callback.call(this,g))}for(var c=0;c<i.length;c++)i[c].sendInBulk&&i[c].pendingNotifications.length>0&&(i[c].callback.call(this,i[c].pendingNotifications),i[c].pendingNotifications=[])}function d(){for(var a=0;a<ta.length;a++)ta[a].filter.component instanceof G&&ta[a].filter.component._status===ma.DELETED&&(ta.splice(a,1),a--)}c(),d()}function S(){for(var a in aa)if(aa.hasOwnProperty(a)&&(aa[a].isPageComponent&&ga!==g||a===ia.PAGE&&ga!==g||!aa[a].isPageComponent&&ga===g))for(var b in ra[a])if(ra[a].hasOwnProperty(b)&&ra[a][b].hasChanged())return!0;return!1}function T(a){function b(a,b,e){var f=[ja.GRID_NEW_GRID,ja.GRID_NEW_ROW,ja.GRID_COLUMN,ja.GRID_NEW_COLUMN,ja.GRID_COLUMN_SPAN,ja.GRID_ROW_SPAN,ja.GRID_COLUMN_CSS_CLASSES,ja.GRID_COLUMN_ATTRIBUTES,ja.GRID_LABEL_COLUMN_SPAN,ja.LABEL_ALIGNMENT,ja.ELEMENT_FIELD_ALIGNMENT,ja.READ_ONLY_HTML_ATTRIBUTES];if(d.hasOwnProperty("_grid")){c[e]=[];for(var g=0;g<f.length;g++)b.hasOwnProperty(f[g])&&a[e].push(f[g])}}var c,d,i={},j=!1;for(var k in aa)if(aa.hasOwnProperty(k)&&(aa[k].isPageComponent&&ga!==g||k===ia.PAGE&&ga!==g||!aa[k].isPageComponent&&ga===g))for(var l in ra[k])if(ra[k].hasOwnProperty(l)&&ra[k][l].hasChanged()){if(d=ra[k][l],d.hasErrors()&&d._status!==ma.DELETED)return void a({error:h("SAVE.FIX_ERRORS")});if(i.hasOwnProperty(k)||(i[k]={c:[],u:[],d:[]}),c={id:d.id,parentId:d.parentId,pageId:d.pageId},f.getLevel()!==f.LOG_LEVEL.OFF&&(c.displayTitle=d.getDisplayTitle()),b(c,d._properties,"gridProperties"),d._status===ma.CREATED){c.properties={};for(var m in d._properties)d._properties.hasOwnProperty(m)&&(c.properties[m]=d._properties[m]._value)}else if(d._status===ma.UPDATED){b(c,sa[k][l],"oldGridProperties"),c.properties={};for(var m in d._properties)d._properties.hasOwnProperty(m)&&(sa[k][l].hasOwnProperty(m)?sa[k][l][m]!==d._properties[m]._value&&(c.properties[m]={oldValue:sa[k][l][m],newValue:d._properties[m]._value}):c.properties[m]=d._properties[m]._value)}i[k][d._status].push(c),j=!0}j?(f.trace("saveChanges: modified components %0",i),e.process("writePageData",{x01:fa,x02:ga,f01:JSON.stringify(i)},{success:function(b){U(b,i,a)},error:function(b,c,d){a({error:d})}})):a({error:"NO_CHANGES"})}function U(a,b,c){function d(a){var b,c,d;d={},b=new G({component:ra[a.typeId][a.id],isDetached:!0});for(var e=0;e<a.errors.length;e++)c=a.errors[e].hasOwnProperty("propertyId")?a.errors[e].propertyId:aa[a.typeId].displayPropertyId,d.hasOwnProperty(c)||(d[c]=[]),d[c].push(a.errors[e].message);l(d,function(b,c){if(!ra[a.typeId][a.id]._properties.hasOwnProperty(b))throw"Error reported for property id "+b+" which doesn't exist for current component!";ra[a.typeId][a.id]._properties[b].errors=c}),ra[a.typeId][a.id]._status===ma.DELETED&&(ra[a.typeId][a.id]._status=ma.UNCHANGED),g.push(Q(b,ra[a.typeId][a.id]))}function e(a,b){for(var c,d,e,f=0;f<b.length;f++)c=b[f],d=new G({component:ra[a][c.id],isDetached:!0}),e=new G({typeId:a,component:c,isDetached:!0}),e._setGridProperties(!0),e._copyToGlobal(),V(ra[a][c.id]),g.push(Q(d,ra[a][c.id]))}function f(a,b){for(var c=0;c<b.length;c++)ra[a][b[c].id]._status===ma.DELETED&&delete ra[a][b[c].id]}var g=[];a.errors?d(a):(l(a,e),l(b,function(a,b){b.hasOwnProperty(ma.DELETED)&&f(a,b[ma.DELETED])})),R(g),c(a.errors?{error:h("SAVE.FAILED")}:{})}function V(a){function b(b,c){sa[a.typeId][a.id][b]=c._value}sa[a.typeId][a.id]={},l(ra[a.typeId][a.id]._properties,b)}function W(){function a(a,b){V(b)}l(ra,function(b,c){sa[b]={},l(c,a)})}function X(b){var c=a.Deferred();return e.process("lockPage",{x01:fa,x02:ga,x03:b},{success:function(a){ra[ia.PAGE][ga]._lock=a,a.isLockedByCurrentUser?(va=!1,c.resolve(a)):(va=!S(),c.reject(h("LOCKED.BY_OTHER_USER",a.owner)))}}),c.promise()}function Y(){var b=a.Deferred(),c=Z();return c?c.isLockedByCurrentUser?e.process("unlockPage",{x01:fa,x02:ga},{success:function(a){"OK"===a.status?(va=!1,ra[ia.PAGE][ga]._lock=!1,b.resolve()):(va=!S(),b.reject(a.reason))}}):b.reject("Page not locked by current user!"):b.reject("Page is already unlocked!"),b.promise()}function Z(){return ra[ia.PAGE][ga]._lock}var $,_,aa,ba,ca,da,ea,fa,ga,ha,ia={APPLICATION:"1000",THEME:"2000",PAGE_TEMPLATE:"2510",FIELD_TEMPLATE:"2520",BUTTON_TEMPLATE:"2530",REGION_TEMPLATE:"2540",LIST_TEMPLATE:"2550",BREADCRUMB_TEMPLATE:"2560",CALENDAR_TEMPLATE:"2570",REPORT_TEMPLATE:"2580",APP_ITEM:"3010",APP_COMPUTATION:"3020",APP_PROCESS:"3030",BUILD_OPTION:"3040",AUTHENTICATION:"3050",AUTHORIZATION:"3060",BREADCRUMB:"3510",LIST:"3520",LOV:"3530",WS_REF:"3540",WS_REF_OPER:"3541",WS_REF_OPER_P_I:"3545",WS_REF_OPER_P_O:"3546",WS_REF_OPER_P_A:"3547",WS_REF_OPER_P_H:"3548",DATA_LOAD_TABLE:"3550",TAB_SET:"3560",PAGE:"5000",REGION:"5110",PAGE_ITEM:"5120",BUTTON:"5130",DA_EVENT:"5140",DA_ACTION:"5150",VALIDATION:"5510",PAGE_COMPUTATION:"5520",PAGE_PROCESS:"5530",BRANCH:"5540",REGION_PLUGIN_ATTR:"7000",IR_ATTRIBUTES:"7010",IR_SAVED_REPORT:"7020",IR_COLUMN_GROUP:"7030",IR_COLUMN:"7040",IR_PRINT_ATTR:"7050",PAGE_PROC_WS_P_I:"7110",PAGE_PROC_WS_P_O:"7120",PAGE_PROC_WS_P_A:"7130",MAP_CHART:"7210",MAP_CHART_SERIES:"7220",CLASSIC_REPORT:"7310",CLASSIC_RPT_COLUMN:"7320",CLASSIC_RPT_PRINT:"7330",TABULAR_FORM:"7410",TAB_FORM_COLUMN:"7420",TAB_FORM_PRINT:"7430",CHART:"7510",CHART_SERIES:"7520",CLASSIC_CALENDAR:"7610",REGION_COLUMN:"7710"},ja={NAME:"1",ERROR_MESSAGE:"6",PAGE_GROUP:"9",PAGE_MODE:"10",PAGE_TEMPLATE:"11",STANDARD_TAB_SET:"12",TITLE:"13",AUTHORIZATION_SCHEME:"24",BUILD_OPTION:"38",COMPUTATION_ITEM_NAME:"51",COMPUTATION_TYPE:"52",COMPUTATION_STATIC_VALUE:"53",COMPUTATION_SQL_STATEMENT:"54",COMPUTATION_SQL_EXPRESSION:"55",COMPUTATION_PLSQL_EXPRESSION:"56",COMPUTATION_PLSQL_FUNCTION_BODY:"57",COMPUTATION_ITEM_VALUE:"58",COMPUTATION_PREFERENCE_VALUE:"59",EXECUTION_SEQUENCE:"60",COMPUTATION_POINT:"61",EVENT:"62",CUSTOM_EVENT:"63",WHEN_TYPE:"64",WHEN_REGION:"65",WHEN_BUTTON:"66",WHEN_ITEMS:"67",WHEN_DOM_OBJECT:"68",WHEN_JQUERY_SELECTOR:"69",DA_ACTION_TYPE:"82",FIRE_WHEN_EVENT_RESULT_IS:"83",FIRE_ON_PAGE_LOAD:"84",AFFECTED_TYPE:"85",AFFECTED_REGION:"86",AFFECTED_BUTTON:"87",AFFECTED_ITEMS:"88",AFFECTED_DOM_OBJECT:"89",AFFECTED_JQUERY_SELECTOR:"90",ITEM_TYPE:"93",REGION_TYPE:"94",PAGE_PROCESS_TYPE:"95",ITEM_NAME:"96",DISPLAY_SEQUENCE:"97",REGION:"98",ITEM_LABEL:"99",LABEL_ALIGNMENT:"100",FIELD_TEMPLATE:"101",VALUE_REQUIRED:"103",GRID_NEW_GRID:"104",GRID_NEW_ROW:"105",GRID_COLUMN:"106",GRID_NEW_COLUMN:"107",GRID_COLUMN_SPAN:"108",GRID_ROW_SPAN:"109",GRID_COLUMN_ATTRIBUTES:"110",FORMAT_MASK:"111",LOV_SQL:"122",ELEMENT_FIELD_ALIGNMENT:"123",ELEMENT_MAX_CHARACTERS:"125",ELEMENT_HEIGHT:"126",CUSTOM_ATTRIBUTES:"129",SOURCE_USED:"133",SOURCE_TYPE:"134",SOURCE_DB_COLUMN:"141",READ_ONLY_HTML_ATTRIBUTES:"171",BUTTON_NAME:"176",BUTTON_LABEL:"177",BUTTON_POSITION:"178",ALIGNMENT:"179",BUTTON_TEMPLATE:"182",BUTTON_IS_HOT:"183",BUTTON_TARGET:"187",PARENT_REGION:"190",REGION_POSITION:"191",PROCESS_POINT:"192",REGION_SQL:"193",REGION_PLUGIN_PLAIN:"194",REGION_TEMPLATE:"217",ITEM_DISPLAY_POSITION:"218",REGION_DISPLAY_SELECTOR:"219",REGION_FUNCTION_RETURNING_SQL:"225",BRANCH_TYPE:"226",BRANCH_POINT:"227",TARGET:"228",BRANCH_PAGE_NUMBER:"229",BRANCH_ITEM:"230",WHEN_BUTTON_PRESSED:"234",ALWAYS_EXECUTE:"245",ASSOCIATED_ITEM:"247",ASSOCIATED_COLUMN:"248",EXECUTE_CONDITION:"250",VALIDATION_REGION:"251",BUTTON_ACTION:"252",USER_INTERFACE:"253",DIALOG_TEMPLATE:"254",OVERWRITE_NAVIGATION_LIST:"255",NAVIGATION_LIST:"256",NAVIGATION_LIST_TEMPLATE:"257",COLUMN_NAME:"267",COLUMN_TYPE:"268",IR_COLUMN_DISPLAY_TYPE:"271",COLUMN_HEADING:"272",HEADING_ALIGNMENT:"275",COLUMN_ALIGNMENT:"276",ALLOW_USERS_TO_HIDE:"277",ALLOW_USERS_TO_SORT:"278",ALLOW_USERS_TO_FILTER:"279",ALLOW_USERS_TO_HIGHLIGHT:"280",ALLOW_USERS_TO_CONTROL_BREAK:"281",ALLOW_USERS_TO_AGGREGATE:"282",ALLOW_USERS_TO_COMPUTE:"283",ALLOW_USERS_TO_CHART:"284",ALLOW_USERS_TO_GROUP_BY:"285",IR_COLUMN_FILTER_TYPE:"286",HTML_EXPRESSION:"289",LINK_TEXT:"290",WHEN_NO_DATA_FOUND_MESSAGE:"297",DOWNLOAD_FORMATS:"308",LINK_ICON:"319",SHOW_DOWNLOAD:"352",PROCESS_REGION:"370",DA_EVENT:"371",TZ_DEPENDENT:"375",CHART_TITLE:"380",ALLOW_USERS_TO_PIVOT:"383",HAS_GENERIC_COLUMNS:"390",GENERIC_COLUMN_COUNT:"391",CLASSIC_REPORT_COLUMN_TYPE:"398",COLUMN_SORT_SEQUENCE:"406",DISABLE_SORT_COLUMN:"408",HEADINGS_TYPE:"427",HEADING_TYPE_PLSQL_FUNCTION_BODY:"428",NUMBER_OF_ROWS_TYPE:"433",NUMBER_OF_ROWS:"434",NUMBER_OF_ROWS_ITEM:"435",TAB_FORM_COLUMN_TYPE:"452",BRANCH_ACCEPT_REQUEST:"465",QUERY_COLUMN_ID:"466",DERIVED_COLUMN:"467",MAP_SERIES_SOURCE_TYPE:"469",MAP_SOURCE_QUERY:"470",MAP_SOURCE_FUNC_RETURNING_SQL:"471",CHART_TYPE:"473",SERIES_CHART_TYPE:"474",PROJECT_GANTT_SERIES_SOURCE_TYPE:"475",PROJECT_GANTT_SOURCE_QUERY:"476",PROJECT_GANTT_SOURCE_FUNC_RETURNING_SQL:"477",RESOURCE_GANTT_SERIES_SOURCE_TYPE:"478",RESOURCE_GANTT_SOURCE_QUERY:"479",RESOURCE_GANTT_SOURCE_FUNC_RETURNING_SQL:"480",PIE_DOUGHNUT_SERIES_SOURCE_TYPE:"481",PIE_DOUGHNUT_SOURCE_QUERY:"482",PIE_DOUGHNUT_SOURCE_FUNC_RETURNING_SQL:"483",DIAL_SERIES_SOURCE_TYPE:"484",DIAL_SOURCE_QUERY:"485",DIAL_SOURCE_FUNC_RETURNING_SQL:"486",SCATTER_SERIES_SOURCE_TYPE:"487",SCATTER_SOURCE_QUERY:"488",SCATTER_SOURCE_FUNC_RETURNING_SQL:"489",RANGE_SERIES_SOURCE_TYPE:"490",RANGE_SOURCE_QUERY:"491",RANGE_SOURCE_FUNC_RETURNING_SQL:"492",CANDLESTICK_SERIES_SOURCE_TYPE:"493",CANDLESTICK_SOURCE_QUERY:"494",CANDLESTICK_SOURCE_FUNC_RETURNING_SQL:"495",LINE_COL_BAR_STK_SERIES_SOURCE_TYPE:"496",LINE_COL_BAR_STK_SOURCE_QUERY:"497",LINE_COL_BAR_STK_SOURCE_FUNC_RETURNING_SQL:"498",SERIES_TYPE:"499",USE_CUSTOM_XML:"534",CUSTOM_XML:"535",PRINT_PAGE_SIZE:"700",PRINT_ORIENTATION:"701",PRINT_UNITS:"702",PRINT_WIDTH:"703",PRINT_HEIGHT:"704",ENABLE_PRINTING:"729",PLUGIN_ATTR_REGION_TYPE:"737",HIDDEN_REGION_TYPE:"737",IS_VISIBLE:"738",COMPUTATION_SQL_COLON:"744",PARAMETER_ID:"753",PAGE_NAVIGATION_TYPE:"754",AFFECTED_JAVASCRIPT_EXPRESSION:"755",WHEN_JAVASCRIPT_EXPRESSION:"756",NAVIGATION_LIST_POSITION:"757",GRID_LABEL_COLUMN_SPAN:"760",GRID_COLUMN_CSS_CLASSES:"763",VALIDATION_TYPE:"4960",VAL_SQL_STATEMENT:"4961",VAL_SQL_EXPRESSION:"4962",VAL_PLSQL_EXPRESSION:"4963",VAL_PLSQL_FUNCTION_BODY_BOOLEAN:"4964",VAL_PLSQL_FUNCTION_BODY_VARCHAR2:"4965",VAL_PLSQL:"4966",VAL_ITEM:"4967",VAL_VALUE:"4968",VAL_REGULAR_EXPRESSION:"4969",REGION_VALIDATION_TYPE:"4980",REGION_VAL_SQL_STATEMENT:"4981",REGION_VAL_SQL_EXPRESSION:"4982",REGION_VAL_PLSQL_EXPRESSION:"4983",REGION_VAL_PLSQL_FUNCTION_BODY_BOOLEAN:"4984",REGION_VAL_PLSQL_FUNCTION_BODY_VARCHAR2:"4985",REGION_VAL_PLSQL:"4986",REGION_VAL_COLUMN:"4987",REGION_VAL_VALUE:"4988",REGION_VAL_REGULAR_EXPRESSION:"4989",CONDITION_TYPE:"5100",CONDITION_SQL_STATEMENT:"5101",CONDITION_SQL_EXPRESSION:"5102",CONDITION_PLSQL_EXPRESSION:"5103",CONDITION_PLSQL_FUNCTION_BODY:"5104",CONDITION_VALUE1:"5105",
CONDITION_ITEM1:"5106",CONDITION_LIST:"5107",CONDITION_PREFERENCE:"5108",CONDITION_PAGE:"5109",CONDITION_PAGES:"5110",CONDITION_TEXT:"5111",CONDITION_VALUE2:"5112",CONDITION_ITEM2:"5113",CONDITION_TEXT2:"5114",FORM_FETCH_TABLE_NAME:"361800327927635543",FORM_PROCESS_TABLE_NAME:"723641536018615468"},ka={CREATE:"create",CHANGE:"change",DELETE:"delete",ERRORS:"errors",NO_ERRORS:"no_errors",WARNINGS:"warnings",NO_WARNINGS:"no_warnings",ADD_PROP:"add_property",REMOVE_PROP:"remove_property",META_DATA:"meta_data",GRID:"grid",DISPLAY_TITLE:"display_title"},la={CREATED:"created",CHANGED:"changed",REMOVED:"removed",VALIDATE:"validate"},ma={CREATED:"c",UPDATED:"u",DELETED:"d",UNCHANGED:""},na={DESKTOP:"DESKTOP",JQM_SMARTPHONE:"JQM_SMARTPHONE"},oa={COMPONENT:"COMPONENT",COMBOBOX:"COMBOBOX",COLOR:"COLOR",CHECKBOXES:"CHECKBOXES",CSS:"CSS",JAVASCRIPT:"JAVASCRIPT",HTML:"HTML",ICON:"ICON",INTEGER:"INTEGER",LINK:"LINK",NUMBER:"NUMBER",ITEM:"ITEM",PAGE:"PAGE",PLSQL:"PLSQL",PLSQL_EXPR_VARCHAR:"PLSQL EXPRESSION VARCHAR2",PLSQL_EXPR_BOOLEAN:"PLSQL EXPRESSION BOOLEAN",PLSQL_FUNC_VARCHAR:"PLSQL FUNCTION BODY VARCHAR2",PLSQL_FUNC_BOOLEAN:"PLSQL FUNCTION BODY BOOLEAN",SELECT_LIST:"SELECT LIST",SQL:"SQL",SQL_EXPR:"SQL EXPRESSION",SUBSCRIPTION:"SUBSCRIPTION",TEXT:"TEXT",TEXTAREA:"TEXTAREA",TEXT_EDITOR:"TEXT EDITOR",SUPPORTED_UI:"SUPPORTED UI",YES_NO:"YES NO",OWNER:"OWNER",TABLE:"TABLE",COLUMN:"COLUMN",TEMPLATE_OPTIONS:"TEMPLATE OPTIONS"},pa={CHANGE:"CHANGE_ATTRIBUTE",CREATE:"CREATE",DELETE:"DELETE",DUPLICATE:"DUPLICATE",MOVE:"MOVE"},qa="1.1",ra={},sa={},ta=[],ua={isInternal:!1,isReadOnly:!1},va=!0;F.prototype._setDynamicProperties=function(){var b,c=aa[this.component.typeId].pluginType;c&&this.component._properties.hasOwnProperty(c.typePropertyId)&&(b=c.plugins[this.component._properties[c.typePropertyId]._value],b&&(-1!==a.inArray(this.id,c.requiredProperties)&&(this._isRequired=b.isRequired),(this.id===ja.REGION_SQL||this.id===ja.LOV_SQL)&&(this._sqlMinColumns=b.sqlMinColumns,this._sqlMaxColumns=b.sqlMaxColumns,this._sqlExamples=b.sqlExamples)))},F.prototype._setDynamicDefaultValue=function(){var b,c=aa[this.component.typeId].pluginType;c&&this.component._properties.hasOwnProperty(c.typePropertyId)&&(b=c.plugins[this.component._properties[c.typePropertyId]._value],b&&this.component.typeId===ia.DA_ACTION&&(this.id===ja.AFFECTED_TYPE?""!==this._value&&-1===a.inArray(this._value,b.stdAttributes)&&(this._value=""):this.id===ja.FIRE_ON_PAGE_LOAD&&(-1!==a.inArray("ONLOAD",b.stdAttributes)?this._value="Y":this._value="N")))},F.prototype._isVisible=function(){var b,c,d,e,f,g=_[this.id],h=this.component,i=aa[h.typeId].properties[this.id];if(g.hasOwnProperty("legacyValues")&&"$NOT_NULL$"!==g.legacyValues[0]&&-1===a.inArray(this._value,g.legacyValues)||-1===a.inArray(h._uiType,g.uiTypes)||g.isInternal&&!ua.isInternal)b=!1;else if(g.hasOwnProperty("legacyValues")&&"$NOT_NULL$"===g.legacyValues[0]&&""===this._value)b=!1;else if(0===i.dependingOn.length)b=!0;else for(f=0;f<i.dependingOn.length;f++){if(c=i.dependingOn[f],h._properties.hasOwnProperty(c.id))if(d=h._properties[c.id]._value,"CHECKBOXES"===_[c.id].type)switch(e=""===d?[]:d.split(":"),c.type){case"EQUALS":b=-1!==a.inArray(c.expression,e);break;case"NOT_EQUALS":b=-1===a.inArray(c.expression,e);break;case"NULL":b=0===e.length;break;case"NOT_NULL":b=e.length>0;break;case"IN_LIST":b=!1,a.each(e,function(d,e){return b=-1!==a.inArray(e,c.values),b?!1:void 0});break;case"NOT_IN_LIST":b=!0,a.each(e,function(d,e){return b=-1===a.inArray(e,c.values),b?void 0:!1})}else if("IN_LIST_LIKE"===c.type)b=!1,a.each(c.values,function(a,c){return b=0===d.search(c),b?!1:void 0});else if("NOT_IN_LIST_LIKE"===c.type)b=!0,a.each(c.values,function(a,c){return b=-1===d.search(c),b?void 0:!1});else switch(c.type){case"EQUALS":b=d===c.expression;break;case"NOT_EQUALS":b=d!==c.expression;break;case"NULL":b=""===d;break;case"NOT_NULL":b=""!==d;break;case"IN_LIST":b=-1!==a.inArray(d,c.values);break;case"NOT_IN_LIST":b=-1===a.inArray(d,c.values)}else b=!1;if(!b)break}return b},F.prototype.getValue=function(){return this._value},F.prototype.getDisplayValue=function(){var a,b,c,d=_[this.id],e=aa[this.component.typeId].properties[this.id],f=this._value,g=[];if(""!==f){if(d.type===oa.YES_NO)return h(f===d.yesValue?"LOV.YES":"LOV.NO");if(d.type===oa.SUPPORTED_UI){if("PLUGINS"===d.lovType){if(aa[this.component.typeId].pluginType.plugins.hasOwnProperty(f))return k("POSTFIX.UNSUPPORTED",aa[this.component.typeId].pluginType.plugins[f].title,!z(this.component._uiType,aa[this.component.typeId].pluginType.plugins[f].uiTypes))}else if("EVENTS"===d.lovType&&ca.lookupMap.hasOwnProperty(f))return k("POSTFIX.UNSUPPORTED",ca.lookupMap[f].d,!z(this.component._uiType,ca.lookupMap[f].uiTypes))}else if("COMPONENT"===d.lovType){if(d.lovComponentTypeId===ia.BUILD_OPTION||d.lovComponentTypeId===ia.AUTHORIZATION){if("MUST_NOT_BE_PUBLIC_USER"===f)return h("LOV.MUST_NOT_BE_PUBLIC_USER");if(/^(!|-)/.test(f)&&(f=f.substr(1),ra[d.lovComponentTypeId].hasOwnProperty(f)))return i("LOV.NOT_W_ARGUMENT",ra[d.lovComponentTypeId][f].getDisplayTitle())}if(ra[d.lovComponentTypeId].hasOwnProperty(f))return ra[d.lovComponentTypeId][f].getDisplayTitle()}else{if("STATIC"!==d.lovType){if("REGION_POSITIONS"===d.lovType||"BUTTON_POSITIONS"===d.lovType)return a="REGION_POSITIONS"===d.lovType?u().displayPointsMap:v(this.component.getProperty(ja.REGION).getValue()).displayPointsMap,a.hasOwnProperty(f)?a[f].name:i("LOV.UNKNOWN_LOOKUP",f);if("TEMPLATE_OPTIONS"===d.lovType){b=x(this).valuesMap,c=f.split(":");for(var j=0;j<c.length;j++)b.hasOwnProperty(c[j])?g.push(b[c[j]].d):g.push(i("LOV.UNKNOWN_LOOKUP",c[j]));return g.join(", ")}return f}if(d.lovValuesMap.hasOwnProperty(f))return d.lovValues[d.lovValuesMap[f]].d}return i("LOV.UNKNOWN_LOOKUP",f)}return e.nullText?e.nullText:f},F.prototype.getMetaData=function(){function a(a,c){var d;return b.component.typeId===a&&(d=b.component.getProperty(c),d&&""!==d.getValue())?!(e.dependingOn.length>0&&e.dependingOn[0].id===ja.CONDITION_TYPE&&"N"===b.component.getProperty(ja.EXECUTE_CONDITION).getValue()):!1}var b=this,c=_[this.id],d=aa[this.component.typeId],e=d.properties[this.id],f=e.referenceScope,g=this.component.isReadOnly()||this._isReadOnly;return"DEPENDS"===f&&(f=a(ia.VALIDATION,ja.VALIDATION_REGION)||a(ia.PAGE_PROCESS,ja.PROCESS_REGION)?"ROW":"COMPONENT"),this.component.typeId!==ia.CLASSIC_RPT_COLUMN&&this.component.typeId!==ia.TAB_FORM_COLUMN||this.id!==ja.DISPLAY_SEQUENCE?this.id===ja.PAGE_MODE&&""===t().defaultTemplates.dialog&&(g=!0):g=!0,{type:c.type,multiValueDelimiter:c.multiValueDelimiter,prompt:c.prompt,unit:c.unit,displayLen:c.displayLen,maxLen:c.maxLen,textCase:c.textCase,displayGroupId:c.displayGroupId,yesValue:c.yesValue,noValue:c.noValue,isLegacy:c.hasOwnProperty("legacyValues"),lovComponentScope:c.lovComponentScope,lovComponentTypeId:c.lovComponentTypeId,helpText:function(){return b._getHelpText()},displaySeq:e.displaySeq,isCommon:e.isCommon,isUnique:e.hasOwnProperty("checkUniqueness"),referenceScope:f,defaultValue:e.defaultValue,supportsSubstitution:e.supportsSubstitution,isReadOnly:g,isRequired:this._isRequired,lovValues:function(a,c){return b._getLovValues(a,c)},quickPicks:function(){return b._getQuickPicks(f)},nullText:e.nullText,parentProperty:e.parentProperty,isCustomPluginAttribute:c.isCustomPluginAttribute}},F.prototype._getLovValues=function(b,c){function d(a,b){for(var c=0;c<a.length;c++)P.push({r:b+a[c].id,d:i("LOV.NOT_W_ARGUMENT",a[c].getDisplayTitle())})}function f(a){for(var b,c=[],d=0;d<a.length;d++)b=z(F.component._uiType,a[d].uiTypes),c.push({r:a[d].r,d:k("POSTFIX.UNSUPPORTED",a[d].d,!b),isQuickPick:b?a[d].isQuickPick:!1,isSupported:b});return c}function j(a){function b(a,c,d){c.sort(function(a,b){return a.d.localeCompare(b.d)});for(var e=0;e<c.length;e++)(F.id!==ja.PARENT_REGION||c[e].r!==F.component.id)&&(a.push({r:c[e].r,d:d+c[e].d}),f.hasOwnProperty(c[e].r)&&b(a,f[c[e].r],d+".."))}for(var c,d,e={},f={"":[]},g=[],h=0;h<a.length;h++)c=a[h].getProperty(ja.PARENT_REGION).getValue(),d=a[h].isOnGlobalPage()&&""===c?"global":c,f.hasOwnProperty(d)||(f[d]=[]),f[d].push({r:a[h].id,d:a[h].getDisplayTitle()}),e[a[h].id]=!0;for(d in f)f.hasOwnProperty(d)&&""!==d&&!e.hasOwnProperty(d)&&(f[""]=f[""].concat(f[d]));return b(g,f[""],""),f.hasOwnProperty("global")&&b(g,f.global,""),g}var m,n,o,p,q,r,s,w,A,B,C,D,E,F=this,G=_[this.id],H=aa[this.component.typeId],J=H.properties[this.id],K={},N=1,O={},P=[],Q=[];if(G.type===oa.SUPPORTED_UI)"PLUGINS"===G.lovType?(l(H.pluginType.plugins,function(a,b){b.isLegacy&&F._value!==a||(r=z(F.component._uiType,b.uiTypes),B={r:a,d:k("POSTFIX.UNSUPPORTED",b.title,!r),isSupported:r},b.category!==g?(O.hasOwnProperty(b.category)||(O[b.category]=P.length,P.push({group:ba[b.category],values:[]})),P[O[b.category]].values.push(B)):P.push(B))}),l(O,function(a,b){P[b].values.sort(function(a,b){return a.d.localeCompare(b.d)})}),P.sort(function(a,b){var c=a.hasOwnProperty("d")?"d":"group",d=b.hasOwnProperty("d")?"d":"group";return a[c].localeCompare(b[d])})):"EVENTS"===G.lovType&&(P.push({group:h("LOV.BROWSER_EVENTS"),values:f(ca.browser)}),P.push({group:h("LOV.APEX_EVENTS"),values:f(ca.apex)}),ca.component.length>0&&P.push({group:h("LOV.COMPONENT_EVENTS"),values:f(ca.component)}),P.push({group:h("LOV.CUSTOM_EVENT"),values:f(ca.custom)}));else if(G.type===oa.OWNER)P=ea.schemas;else if(G.type===oa.TABLE)e.process("getDbObjects",{x01:c.type,x02:F.component._properties[J.parentProperty.id]._value,x03:"N"},{success:b});else if(G.type===oa.COLUMN){q=this._getAvailableColumns(!0);for(var R=0;R<q.length;R++)y(q[R].type,G.dataTypes)?P.push({r:q[R].name,d:q[R].name}):"ROWID"!==q[R].name&&q[R].type&&Q.push({r:q[R].name,d:q[R].name+" ("+q[R].type.toLowerCase()+")"});Q.length>0&&P.push({group:h("LOV.COLUMN_WRONG_DATA_TYPE"),values:Q})}else{if(G.type===oa.ITEM)return void L(c,b);if(G.type===oa.PAGE)return void M(c,b);if(G.lovType)if("COMPONENT"===G.lovType)if("PARENT"===G.lovComponentScope?K={parentId:F.component.parentId,excludeGlobalPage:!0}:"PAGE"===G.lovComponentScope?K={excludeGlobalPage:!0}:"PAGE_AND_GLOBAL"===G.lovComponentScope?K={}:"THEME"===G.lovComponentScope&&(K={parentId:t().id},G.id!==ja.PAGE_TEMPLATE&&G.id!==ja.DIALOG_TEMPLATE||!J.parentProperty||J.parentProperty.id!==ja.PAGE_MODE||(D=-1!==a.inArray(F.component._properties[ja.PAGE_MODE]._value,["MODAL","NON_MODAL"]),E=t().templates[ia.PAGE_TEMPLATE],K.filterFunction=function(){return E[this.id].isDialog===D})),(G.id===ja.VALIDATION_REGION||G.id===ja.PROCESS_REGION)&&(K.properties=[{id:ja.REGION_TYPE,value:"NATIVE_TABFORM"}]),m=I(G.lovComponentTypeId,K,!1),G.lovComponentTypeId===ia.REGION)P=j(m);else{for(var R=0;R<m.length;R++)(m[R].typeId!==this.component.typeId||m[R].id!==this.component.id)&&P.push({r:m[R].id,d:m[R].getDisplayTitle()});P.sort(function(a,b){return a.d.localeCompare(b.d)}),G.lovComponentTypeId===ia.BUILD_OPTION?d(m,"-"):G.lovComponentTypeId===ia.AUTHORIZATION&&(P.push({r:"MUST_NOT_BE_PUBLIC_USER",d:h("LOV.MUST_NOT_BE_PUBLIC_USER")}),d(m,"!"))}else if("STATIC"===G.lovType)if(F.id===ja.AFFECTED_TYPE){p=H.pluginType.plugins[F.component.getProperty(ja.DA_ACTION_TYPE).getValue()].stdAttributes,"DOM_OBJECT"===F._value&&p.push("DOM_OBJECT");for(var R=0;R<G.lovValues.length;R++)-1!==a.inArray(G.lovValues[R].r,p)&&P.push(G.lovValues[R])}else for(var R=0;R<G.lovValues.length;R++)G.lovValues[R].isLegacy&&F._value!==G.lovValues[R].r||G.lovValues[R].isInternal&&!ua.isInternal||P.push(G.lovValues[R]);else if("REGION_POSITIONS"===G.lovType||"BUTTON_POSITIONS"===G.lovType){"REGION_POSITIONS"===G.lovType?(n=u().displayPoints,o="REGION"):(C=this.component.getProperty(ja.REGION).getValue(),o="BUTTON",n=""!==C?v(C).displayPoints:[]);for(var R=0;R<n.length;R++)-1===a.inArray(o,n[R].types)||"BUTTON"===n[R].types[0]&&"RIGHT_OF_IR_SEARCH_BAR"===n[R].id&&""!==C&&"NATIVE_IR"!==I(ia.REGION,{id:C})[0].getProperty(ja.REGION_TYPE).getValue()||P.push({r:n[R].id,d:n[R].name,isLegacy:n[R].isLegacy})}else if("GRID_COLUMNS"===G.lovType){A=F.component._grid.maxColumns,(F.id===ja.GRID_COLUMN_SPAN||F.id===ja.GRID_LABEL_COLUMN_SPAN)&&(s=parseInt(F.component._properties[ja.GRID_COLUMN].getValue(),10),s>0&&(A-=s-1),F.id===ja.GRID_LABEL_COLUMN_SPAN&&(w=parseInt(F.component._properties[ja.GRID_COLUMN_SPAN].getValue(),10),w>0&&(A=w),N=0,A-=1));for(var R=N;A>=R;R++)P.push({r:R+"",d:R+""})}else-1!==G.lovType.indexOf("FORMAT_MASKS")?P="DATE_FORMAT_MASKS"===G.lovType?da.dates:"NUMBER_FORMAT_MASKS"===G.lovType?da.numbers:"CHART_FORMAT_MASKS"===G.lovType?da.chart:da.dates.concat(da.numbers):"DISTINCT"===G.lovType?e.process("getDistinctValues",{x01:this.component.typeId,x02:this.id},{success:function(a){function c(a){var b;if(""!==a)if(_[F.id].multiValueDelimiter){b=a.split(_[F.id].multiValueDelimiter);for(var c=0;c<b.length;c++)e[b[c]]=""}else e[a]=""}for(var d=I(F.component.typeId,{}),e={},f=0;f<d.length;f++)d[f]._properties.hasOwnProperty(F.id)&&c(d[f]._properties[F.id]._value);for(var f=0;f<a.length;f++)c(a[f]);for(var g in e)e.hasOwnProperty(g)&&P.push({d:g,r:g});P.sort(function(a,b){return a.d.localeCompare(b.d)}),b(P)}}):"MAP_REGIONS"===G.lovType?e.process("getMapRegions",{x01:F.component._properties[J.parentProperty.id]._value,x02:c.id},{success:b}):"TEMPLATE_OPTIONS"===G.lovType&&(P=x(F).values)}return a.isFunction(b)?void b(P):P},F.prototype._getQuickPicks=function(b){function c(a){var b;a.i?(b=a.isLegacy?'<img src="#IMAGE_PREFIX#'+(a.dir||"")+a.i+'.gif" alt="">':'<img src="#IMAGE_PREFIX#app_ui/img/icons/'+a.i+'.png" class="'+a.i+'" alt="">',p.push({r:b,d:a.i+(a.isLegacy?".gif":".png"),icon:"icon-link-"+a.i})):p.push({r:a.r,d:a.d||a.r})}function d(a){for(var b=0;b<a.length;b++)a[b].isQuickPick&&z(j.component._uiType,a[b].uiTypes)&&c(a[b])}var e,f,g,h,i,j=this,k=_[this.id],m=aa[this.component.typeId],n=m.properties[this.id],p=[];if(k.type===oa.SUPPORTED_UI)"PLUGINS"===k.lovType?(l(m.pluginType.plugins,function(a,b){b.isQuickPick&&z(j.component._uiType,b.uiTypes)&&!b.isLegacy&&c({r:a,d:b.title})}),p.sort(function(a,b){return a.d.localeCompare(b.d)})):"EVENTS"===k.lovType&&(d(ca.browser),d(ca.apex),d(ca.component));else if(k.lovType)if("STATIC"===k.lovType)if(j.id===ja.AFFECTED_TYPE);else for(var q=0;q<k.lovValues.length;q++)k.lovValues[q].isQuickPick&&!k.lovValues[q].isLegacy&&c(k.lovValues[q]);else if("REGION_POSITIONS"===k.lovType||"BUTTON_POSITIONS"===k.lovType){"REGION_POSITIONS"===k.lovType?(e=u().displayPoints,f="REGION"):(g=this.component.getProperty(ja.REGION).getValue(),f="BUTTON",e=""!==g?v(g).displayPoints:[]);for(var q=0;q<e.length;q++)-1!==a.inArray(f,e[q].types)&&e[q].isQuickPick&&c({r:e[q].id,d:e[q].name})}else-1!==k.lovType.indexOf("FORMAT_MASKS");else if(-1!==a.inArray(m.id,[ia.IR_ATTRIBUTES,ia.IR_COLUMN,ia.CLASSIC_RPT_COLUMN,ia.TAB_FORM_COLUMN,ia.VALIDATION,ia.PAGE_PROCESS,ia.REGION_PLUGIN_ATTR,ia.REGION_COLUMN]))if(k.id===ja.LINK_TEXT&&c({r:"#"+j.component.getProperty(ja.COLUMN_NAME).getValue()+"#"}),k.id===ja.LINK_ICON||k.id===ja.LINK_TEXT)c({i:"apex-edit-pencil"}),c({i:"apex-edit-pencil-alt"}),c({i:"apex-edit-page"}),c({i:"apex-edit-view"}),c({i:"pencil16x16",dir:"menu/",isLegacy:!0}),c({i:"e2",isLegacy:!0}),c({i:"small_page",dir:"ws/",isLegacy:!0}),c({i:"magnifying_glass_white_bg",isLegacy:!0});else if(n.supportsSubstitution&&"ROW"===b&&-1!==a.inArray(k.type,[oa.TEXT,oa.TEXTAREA,oa.HTML])){h=L({type:"columns",component:j.component}),i=-1!==a.inArray(m.id,[ia.IR_ATTRIBUTES,ia.IR_COLUMN,ia.CLASSIC_RPT_COLUMN,ia.TAB_FORM_COLUMN])?{prefix:"#",postfix:"#",enquote:!1}:{prefix:"&",postfix:".",enquote:!0};for(var q=0;q<h.length;q++)c({r:i.prefix+(i.enquote?o(h[q].name):h[q].name)+i.postfix,d:h[q].name})}return p},F.prototype._getHelpText=function(){function c(c){var d,e="<dl>";d=a.map(k.pluginType.plugins,function(a,b){return 0===b.indexOf(c)&&z(i.component._uiType,a.uiTypes)&&!a.isLegacy?a:void 0}).sort(function(a,b){return a.title.localeCompare(b.title)});for(var f=0;f<d.length;f++)e+="<dt>"+b.escapeHTML(d[f].title)+"</dt>",e+="<dd>"+d[f].helpText,d[f].aboutUrl&&(e+=" "+h("HELP.ABOUT_PLUGIN",d[f].aboutUrl)),e+="</dd>";return e+="</dl>"}function d(){var a,c=i.getMetaData().lovValues();a="<p>"+h("HELP.AVAILABLE_OPTIONS")+"</p><dl>",l.nullText&&(a+="<dt>"+l.nullText+"</dt>",l.nullHelpText&&(a+="<dd>"+l.nullHelpText+"</dd>"));for(var d=0;d<c.length;d++)a+="<dt>"+b.escapeHTML(c[d].d)+"</dt>",(c[d].helpText||c[d].isLegacy)&&(a+="<dd>",c[d].helpText&&(a+=c[d].helpText),c[d].isLegacy&&(a+="<p><em>"+h("HELP.DEPRECATED.LOV_VALUE",qa)+"</em></p>"),a+="</dd>");return a+="</dl>"}function e(){function a(a){for(var c=0;c<a.length;c++)e+="<dt>"+b.escapeHTML(a[c].name)+"</dt>",a[c].helpText&&(e+="<dd>"+a[c].helpText+"</dd>")}var c,d,e,f,g=x(i),j=[],k={},l=[];for(f=0;f<g.values.length;f++)g.values[f].groupId?(c=g.values[f].groupId,k.hasOwnProperty(c)?d=k[c]:(j.push({title:g.groups[c].title,seq:g.groups[c].seq,helpText:g.groups[c].helpText,lovValues:[]}),d=j.length-1,k[c]=d),j[d].lovValues.push({name:g.values[f].d,helpText:g.values[f].helpText})):l.push({name:g.values[f].d,helpText:g.values[f].helpText});for(j.sort(function(a,b){return a.seq===b.seq?a.title.localeCompare(b.title):a.seq-b.seq}),e="<p>"+h("HELP.AVAILABLE_OPTIONS")+"</p><dl>",a(l),f=0;f<j.length;f++)e+="<dt>"+b.escapeHTML(j[f].title)+"</dt><dd>",j[f].helpText&&(e+="<p>"+j[f].helpText+"</p>"),e+="<dl>",a(j[f].lovValues),e+="</dl></dd>";return e+="</dl>"}var f,i=this,j=_[this.id],k=aa[this.component.typeId],l=k.properties[this.id];return f="<p>"+(l.helpText||j.helpText)+"</p>",k.pluginType&&this.id===k.pluginType.typePropertyId&&(f=f.replace(/#NATIVE_PLUGINS#/,c("NATIVE")).replace(/#CUSTOM_PLUGINS#/,c("PLUGIN"))),j.legacyValues&&(f="<p><em>"+h("HELP.DEPRECATED.ATTRIBUTE",qa)+"</em></p>"),"STATIC"===j.lovType?/#LOV_VALUES#/.test(f)?f=f.replace(/#LOV_VALUES#/,d()):f+=d():"TEMPLATE_OPTIONS"===j.lovType&&(f+=e()),(this._sqlExamples!==g||j.examples!==g)&&(f+="<h4>"+h("HELP.EXAMPLES")+"</h4><p>"+(this._sqlExamples||j.examples)+"</p>"),-1===a.inArray(j.type,[oa.CHECKBOXES,oa.LINK,oa.COMPONENT,oa.SELECT_LIST,oa.SUPPORTED_UI,oa.SUBSCRIPTION,oa.YES_NO,oa.OWNER,oa.TABLE,oa.COLUMN,oa.TEMPLATE_OPTIONS])&&(f+="<h4>"+h("HELP.ADDITIONAL_INFO")+"</h4>",f+="<ul><li>"+h("HELP.TYPE")+": "+h("HELP.PROP_TYPE."+j.type),j.multiValueDelimiter&&(f+=" ("+h("HELP.MULTIPLE.TEXT",h("HELP.MULTIPLE."+j.multiValueDelimiter))+")"),f+="</li>",("SQL"===j.type.substr(0,3)||"PLSQL"===j.type.substr(0,5))&&(f+="<li>"+h("HELP.BIND_VARIABLES")+": "+h("HELP.REF_SCOPE."+i.getMetaData().referenceScope)+"</li>"),l.supportsSubstitution&&(f+="<li>"+h("HELP.SUBSTITUTIONS")+": "+h("HELP.REF_SCOPE."+i.getMetaData().referenceScope)+"</li>"),j.type===oa.SQL?(f+="<li>"+h("HELP.MIN_COLUMNS")+": "+this._sqlMinColumns+"</li>",this._sqlMaxColumns>0&&this._sqlMaxColumns<999&&(f+="<li>"+h("HELP.MAX_COLUMNS")+": "+this._sqlMaxColumns+"</li>")):(j.type===oa.INTEGER||j.type===oa.NUMBER)&&(j.minValue!==g&&(f+="<li>"+h("HELP.MIN_VALUE")+": "+j.minValue+"</li>"),j.maxValue!==g&&(f+="<li>"+h("HELP.MAX_VALUE")+": "+j.maxValue+"</li>")),j.restrictedChars!==g&&(f+="<li>"+h("HELP.RESTRICTED_CHARS_LABEL")+": "+h("HELP.RESTRICTED_CHARS."+j.restrictedChars)+"</li>"),f+="</ul>"),f},F.prototype.getColumns=function(a){var b=[];if(0===this.errors.length&&0===this.warnings.length)if(a)b=this._columns;else for(var c=0;c<this._columns.length;c++)("ROWID"!==this._columns[c].name||0!==c)&&b.push(this._columns[c]);return b},F.prototype.hasOrderBy=function(){return 0===this.errors.length&&this._hasOrderBy},F.prototype._getAvailableColumns=function(a){var b=aa[this.component.typeId].properties[this.id],c=b.parentProperty,d=this.component,e=[];if(b.hasOwnProperty("parentProperty"))for(;d!==g;){if(d.typeId===c.typeId){if(_[c.id].lovComponentTypeId===ia.REGION){e=E(this.component._properties[c.id]._value);break}e=d._properties[c.id].getColumns(a);break}d=d.getParent()}return e},F.prototype._checkColumn=function(a){for(var b=this._getAvailableColumns(!0),c=0;c<b.length;c++)if(b[c].name===a)return y(b[c].type,_[this.id].dataTypes)?"":h("VAL.COLUMN_HAS_WRONG_DATA_TYPE");return h("VAL.COLUMN_NOT_FOUND")},F.prototype.validate=function(d){function f(a){a.error&&x.errors.push(a.error),a.warning&&x.warnings.push(a.warning)}var i,j,k,l,m,n,o=/^&((\w+)|("[^\n\r"&]+"))\.$/,p={US_ONLY:/[^a-zA-Z0-9 ]/,US_ONLY_NO_SPACE:/[^a-zA-Z0-9]/,US_ONLY_UNDERSCORE_NO_SPACE:/[^a-zA-Z0-9_]/,WEB_SAFE:/[<>"]/,NO_SPECIAL_CHAR:/[&<>"\/;,*|=%]|(--)/,NO_SPECIAL_CHAR_NL:/[&<>"\/;,*|=%\n\r]|(--)/,SAFE_COMPONENT_NAME:/[ :&,.+?^'"\n\r]/},q={decimal:c.getDecimalSeparator(),group:c.getGroupSeparator()},r=d,s=this,t=aa[this.component.typeId],u=t.properties,v=u[this.id],w=_[this.id],x={errors:[],warnings:[],columns:this._columns,hasOrderBy:this._hasOrderBy};if(this._isRequired&&""===a.trim(r))x.errors.push(h("VAL.IS_REQUIRED"));else if(""!==a.trim(r))if(w.restrictedChars&&p[w.restrictedChars].test(r))x.errors.push(h("VAL.HAS_RESTRICTED_CHAR",r.match(p[w.restrictedChars])));else if((w.type===oa.NUMBER||w.type===oa.INTEGER)&&v.supportsSubstitution&&o.test(r));else if(r.length>w.maxLen)x.errors.push(h("VAL.VALUE_TOO_LONG",r.length-w.maxLen));else{if(w.type===oa.NUMBER||w.type===oa.INTEGER)w.type===oa.NUMBER?("."!==q.decimal&&(r=r.replace(new RegExp(b.escapeRegExp(q.group),"g"),"!"),r=r.replace(new RegExp(b.escapeRegExp(q.decimal),"g"),".")),i=Number(r),k=h("VAL.MUST_BE_NUMERIC")):(i=parseInt(r,10),k=h("VAL.MUST_BE_INTEGER")),isNaN(i)||i!=r?x.errors.push(k):(w.minValue!==g||w.maxValue!==g)&&(i<w.minValue?x.errors.push(h("VAL.VALUE_LESS_MIN_VALUE",w.minValue)):i>w.maxValue&&x.errors.push(h("VAL.VALUE_GREATER_MAX_VALUE",w.maxValue)));else if(-1!==a.inArray(s.id,[ja.REGION_SQL,ja.REGION_FUNCTION_RETURNING_SQL])&&s.component.getProperty(ja.GENERIC_COLUMN_COUNT)){j=s.component.getProperty(ja.GENERIC_COLUMN_COUNT).getValue(),x.columns=[],x.hasOrderBy=!1;for(var y=1;j>=y;y++)x.columns.push({name:"COL"+(10>y?"0":"")+y,type:"VARCHAR2",isRequired:!1,maxLen:4e3})}else-1!==a.inArray(w.type,[oa.TABLE,oa.SQL,oa.SQL_EXPR,oa.PLSQL,oa.PLSQL_EXPR_VARCHAR,oa.PLSQL_EXPR_BOOLEAN,oa.PLSQL_FUNC_VARCHAR,oa.PLSQL_FUNC_BOOLEAN])||w.hasPlSqlCheck?(w.type===oa.TABLE&&(n=this.component._properties[v.parentProperty.id]._value),e.process("validateProperty",{x01:this.id,x02:w.type,x03:this._sqlMinColumns,x04:this._sqlMaxColumns,x05:r,x06:n},{success:function(b){x.columns=b.columns||[],x.hasOrderBy=b.hasOrderBy,"OK"!==b.result&&(a.inArray(w.type,[oa.SQL,oa.TABLE])>=0&&v.refByChilds.length>0||s.id===ja.REGION_FUNCTION_RETURNING_SQL?x.errors.push(b.result):x.warnings.push(b.result))},async:!1})):w.type===oa.COLUMN&&(k=this._checkColumn(r),""!==k&&x.errors.push(k));v.checkUniqueness&&(l={properties:[{id:this.id,value:r}]},"PARENT"===v.checkUniqueness?l.parentId=this.component.parentId:"PAGE"===v.checkUniqueness&&(l.pageId=ga),m=I(this.component.typeId,l),I(this.component.typeId,l).length>0&&m[0].id!==this.component.id&&x.errors.push(h("VAL.MUST_BE_UNIQUE"))),0===x.errors.length&&f(this.component._callPluginCallback({action:la.VALIDATE,property:this,value:r})),0===x.errors.length&&f(this.component._callComponentTypeCallback({action:la.VALIDATE,property:this,value:r}))}return x},F.prototype._setValue=function(c,d){function e(){-1!==a.inArray(v.type,[oa.NUMBER,oa.INTEGER,oa.LINK,oa.ITEM,oa.PAGE,oa.TABLE])&&(p=a.trim(p)),"UPPER"===v.textCase?p=p.toUpperCase():"LOWER"===v.textCase&&(p=p.toLowerCase())}function f(a){function b(a){delete o._properties[a];for(var c=0;c<t[a].refByDependingOn.length;c++)b(t[a].refByDependingOn[c])}for(var c,d=0;d<t[a].refByDependingOn.length;d++)c=t[a].refByDependingOn[d],o._properties.hasOwnProperty(c)?o._properties[c]=new F({component:o,propertyId:c,defaultValue:o._properties[c]._value,columns:o._properties[c]._columns,hasOrderBy:o._properties[c]._hasOrderBy}):c===ja.GRID_LABEL_COLUMN_SPAN||c===ja.READ_ONLY_HTML_ATTRIBUTES?o._setGridProperties(!0):o._properties[c]=new F({component:o,propertyId:c}),o._properties.hasOwnProperty(c)&&o._properties[c]._isVisible()?f(c):b(c)}function i(){function a(a,b){var c,d;a._properties.hasOwnProperty(b)&&(c=a._properties[b],d=a===o?"_setValue":"setValue",_[b].type===oa.COLUMN&&""!==n._value&&""!==c._value?c._checkColumn(c._value)===h("VAL.COLUMN_NOT_FOUND")?c[d]("",l):c[d](c._value,l):c[d](B(c,aa[a.typeId].properties[b].defaultValue),l))}var b;if(0===n.errors.length&&0===n.warnings.length||1===n.errors.length&&n.errors[0]===h("VAL.IS_REQUIRED"))for(var c=0;c<u.refByChilds.length;c++)if(u.refByChilds[c].typeId===o.typeId)a(o,u.refByChilds[c].id);else{b=o.getChildrenUntil(u.refByChilds[c].typeId);for(var d=0;d<b.length;d++)a(b[d],u.refByChilds[c].id)}}function j(){-1!==a.inArray(n.id,[ja.GRID_NEW_GRID,ja.GRID_NEW_ROW,ja.GRID_COLUMN,ja.GRID_NEW_COLUMN,ja.GRID_COLUMN_SPAN])||o.typeId===ia.REGION&&-1!==a.inArray(n.id,[ja.REGION_POSITION,ja.PARENT_REGION,ja.REGION_TEMPLATE])||o.typeId===ia.BUTTON&&-1!==a.inArray(n.id,[ja.BUTTON_POSITION,ja.REGION])||o.typeId===ia.PAGE_ITEM&&-1!==a.inArray(n.id,[ja.REGION,ja.ITEM_TYPE,ja.FIELD_TEMPLATE])?o._setGridProperties():o.typeId===ia.PAGE&&-1!==a.inArray(n.id,[ja.PAGE_TEMPLATE,ja.DIALOG_TEMPLATE])&&H()}function k(a,c){var d,e,f,g,h,i,j,k,l=b.escapeRegExp(a),m=[];for(i=0;i<aa[ia.PAGE_ITEM].refByProperties.length;i++)if(d=_[aa[ia.PAGE_ITEM].refByProperties[i]],"ITEM"===d.type)for(d.multiValueDelimiter?(f=new RegExp("(^|"+d.multiValueDelimiter+"|\\s)"+l+"($|"+d.multiValueDelimiter+"|\\s)","i"),g={properties:[{id:d.id,value:f}]}):(f=new RegExp("^"+l+"$","i"),g={properties:[{id:d.id,value:f}]}),j=0;j<d.refByComponentTypes.length;j++)for(e=aa[d.refByComponentTypes[j]].properties[d.id],m=I(d.refByComponentTypes[j],g,!1),k=0;k<m.length;k++)h=m[k].getProperty(d.id),d.multiValueDelimiter?h.setValue(h.getValue().replace(f,"$1"+c+"$2")):h.setValue(c)}var l,m,n=this,o=this.component,p=c+"",q=this._value,r=aa[o.typeId],s=r.pluginType,t=r.properties,u=t[this.id],v=_[n.id],w=g,x=g;if(d=a.extend({checkReadOnly:!0},d),l=a.extend({},{},d),d.checkReadOnly){if(va)throw"Page is read only!";if(o.isReadOnly())throw"Component is read only!";if(n._isReadOnly)throw"Property '"+n.getMetaData().prompt+"' ("+n.id+") is read only for this component!"}(p!==n._value||0!==n.errors.length||0!==n.warnings.length||d.forceSetValue)&&(e(),m=this.validate(p),s&&n.id===s.typePropertyId&&p!==q&&this.component._callPluginCallback({action:la.REMOVED}),n._value=p,n.hasChanged=!0,n.errors=m.errors,n.warnings=m.warnings,n._columns=m.columns,n._hasOrderBy=m.hasOrderBy,0===n.errors.length&&n.id===r.seqPropertyId&&(w=parseInt(p,10)),n.id===r.parentPropertyId&&(x=p),o._setHasChanged({seq:w,parentId:x}),f(n.id),i(),n.id===ja.ITEM_NAME&&k(q,p),j(),o._setHasChanged())},F.prototype.setValue=function(a,b){var c;if(this.component._status===ma.DELETED)throw"Component has been deleted!";return P(this.component,wa.CHANGE),c=this._value,this._setValue(a,{checkReadOnly:!0,forceSetValue:b}),this.component._callPluginCallback({property:this,oldValue:c}),this.component._callComponentTypeCallback({property:this,oldValue:c}),this},F.prototype._setUniqueValue=function(){var a=aa[this.component.typeId].properties[this.id].checkUniqueness,b={properties:[{id:this.id,value:""}]},c=this.getValue();"PARENT"===a?b.parentId=this.component.parentId:"PAGE"===a&&(b.pageId=ga),b.properties[0].value=c;for(var d=1;1e4>d;d++){if(0===I(this.component.typeId,b,!1).length)return void(this._value=b.properties[0].value);b.properties[0].value=c+"_"+d}throw"Unable to generate a unique value for property '"+this.getMetaData().prompt+"' ("+this.id+")!"},G.prototype._callPluginCallback=function(b){var c,d,e,f,h=aa[this.typeId],i=h.pluginType,j=b.action;if(i&&(c=b.action===la.VALIDATE&&b.property.id===i.typePropertyId?i.plugins[b.value]:i.plugins[this._properties[i.typePropertyId]._value])){if(j===g){if(b.property&&b.property.id===i.typePropertyId)j=la.CREATED;else if(b.properties)for(var k=0;k<b.properties.length;k++)if(b.properties[k].id===i.typePropertyId){j=la.CREATED;break}j===g&&(j=la.CHANGED)}if(h.id!==ia.REGION||j!==la.CREATED&&j!==la.REMOVED||(j===la.CREATED&&-1===a.inArray(c.name,["NATIVE_SQL_REPORT","NATIVE_FNC_REPORT","NATIVE_TABFORM"])?(d=aa[ia.REGION_PLUGIN_ATTR].pluginType.plugins[c.name],(d.attributes.length>0||-1!==a.inArray("FETCHED_ROWS",d.stdAttributes)||-1!==a.inArray("NO_DATA_FOUND_MESSAGE",d.stdAttributes)||-1!==a.inArray("COLUMN_HEADING",d.stdAttributes)||"NATIVE_BREADCRUMB"===c.name||"NATIVE_LIST"===c.name)&&new G({typeId:ia.REGION_PLUGIN_ATTR,parentId:this.id,values:[{id:ja.HIDDEN_REGION_TYPE,value:c.name}]})):j===la.REMOVED&&(e=this.getChilds(ia.REGION_PLUGIN_ATTR),1===e.length&&e[0].remove())),a.isFunction(c.callback)&&(j===la.VALIDATE?f=c.callback.apply(this,[j,b.property,b.value]):j===la.CREATED||j===la.REMOVED?c.callback.apply(this,[j]):j===la.CHANGED&&b.property&&c.callback.apply(this,[j,b.property]),b.properties))for(var k=0;k<b.properties.length;k++)b.properties[k].id!==i.typePropertyId&&c.callback.apply(this,[la.CHANGED,this.getProperty(b.properties[k].id),b.properties[k].oldValue])}return f||{}},G.prototype._callComponentTypeCallback=function(b){var c,d=aa[this.typeId];if(a.isFunction(d.callback))if(b.action===la.VALIDATE)c=d.callback.apply(this,[b.action,b.property,b.value]);else if(b.action)d.callback.apply(this,[b.action]);else if(b.property)d.callback.apply(this,[la.CHANGED,b.property,b.oldValue]);else if(a.isArray(b.properties))for(var e=0;e<b.properties.length;e++)d.callback.apply(this,[la.CHANGED,this.getProperty(b.properties[e].id),b.properties[e].oldValue]);return c||{}},G.prototype.isOnGlobalPage=function(){return this.pageId===ha.globalPageId&&this.pageId!==ga},G.prototype.isReadOnly=function(){return va||this._isReadOnly||this.isOnGlobalPage()||aa[this.typeId].isSharedComponent},G.prototype.hasChanged=function(){return this._status!==ma.UNCHANGED},G.prototype.hasErrors=function(){for(var a in this._properties)if(this._properties.hasOwnProperty(a)&&this._properties[a].errors.length>0)return!0;return!1},G.prototype.hasWarnings=function(){for(var a in this._properties)if(this._properties.hasOwnProperty(a)&&this._properties[a].warnings.length>0)return!0;return!1},G.prototype._setHasChanged=function(a){var b=this;a=a||{},a.status===ma.DELETED?b._status=ma.DELETED:b._status===ma.UNCHANGED&&(b._status=ma.UPDATED),a.seq!==g&&(b.seq=a.seq),a.parentId!==g&&(b.parentId=a.parentId)},G.prototype._deleteProperty=function(a){var b=aa[this.typeId].properties[a];delete this._properties[a];for(var c=0;c<b.refByDependingOn.length;c++)this._deleteProperty(b.refByDependingOn[c])},G.prototype._cleanProperties=function(){for(var a in this._properties)this._properties.hasOwnProperty(a)&&(this._properties[a]._isVisible()||this._deleteProperty(a))},G.prototype._getGridParams=function(b){function c(b){var c,d,e,g=I(ia.REGION,{id:b})[0],h=a.extend({},g._grid);return h.hasGridSupport&&!j.alwaysUseMaxColumns&&(c=g._properties[ja.GRID_COLUMN].getValue(),d=g._properties[ja.GRID_COLUMN_SPAN],j.grid.hasColumnSpan&&d&&(e=d.getValue()),e>0?(h.maxColumns=parseInt(e,10),f.trace("_getGridParams: Region %O uses column span, reduce max columns to %i",g,h.maxColumns)):c>0&&(h.maxColumns-=parseInt(c,10)-1,f.trace("_getGridParams: Region %O uses column positioning, reduce max columns to %i",g,h.maxColumns))),h}var d,e,h,i,j=u(),k={};return this.typeId===ia.REGION?""===this._properties[ja.PARENT_REGION]._value?h=this._properties[ja.REGION_POSITION]._value:(d=this._properties[ja.PARENT_REGION]._value,h="SUB_REGIONS"):this.typeId===ia.PAGE_ITEM?this.parentId&&(d=this.parentId,h="BODY"):this.typeId===ia.BUTTON&&this.parentId&&(d=this.parentId,h=this._properties[ja.BUTTON_POSITION]._value),i=d===g?j.displayPointsMap[h]:v(d).displayPointsMap[h],i===g?(i={hasGridSupport:!0,maxFixedGridColumns:j.grid.maxColumns,isUnknown:!0},f.warn("_getGridParams: Component %O uses unknown display point %s! Fallback to default values",this,h)):(j.grid.alwaysUseMaxColumns||i.maxFixedGridColumns===g)&&(i.maxFixedGridColumns=j.grid.maxColumns),i.isUnknown&&(k.isUnknown=!0),
d!==g?(e=c(d),k.pageDisplayPointhasGridSupport=e.pageDisplayPointhasGridSupport,k.hasGridSupport=e.pageDisplayPointhasGridSupport?i.hasGridSupport:!1,"FIXED"!==j.grid.type||j.grid.alwaysUseMaxColumns?k.maxColumns=j.grid.maxColumns:(i.maxFixedGridColumns<0?k.maxColumns=Math.max(e.maxColumns+i.maxFixedGridColumns,0):i.maxFixedGridColumns>0?k.maxColumns=Math.min(i.maxFixedGridColumns,e.maxColumns):k.maxColumns=e.maxColumns,k.maxColumns<2&&(k.hasGridSupport=!1,f.warn("_getGridParams: Component %O, disable grid support because there are no more grid columns available!",this)))):(k.hasGridSupport=i.hasGridSupport,k.pageDisplayPointhasGridSupport=i.hasGridSupport,k.hasGridSupport&&(k.maxColumns=i.maxFixedGridColumns)),f.trace("_getGridParams: Component %O returned grid params %O",this,k),k},G.prototype._setGridProperties=function(b){function c(a,b){b?(h._properties.hasOwnProperty(a)||(h._properties[a]=new F({component:h,propertyId:a})),h._properties[a]._isVisible()||h._deleteProperty(a)):h._deleteProperty(a)}function d(a){var b=h._properties[a];return b?b.getValue():""}function e(a,c){for(var d=I(a,{properties:[{id:c,value:h.id}]}),e=0;e<d.length;e++)b!==g||d[e].isOnGlobalPage()||(P(d[e],wa.CHANGE),d[e]._setHasChanged()),d[e]._setGridProperties(b)}var f,h=this,i=u(),j=!1,k=!1;-1!==a.inArray(this.typeId,[ia.REGION,ia.PAGE_ITEM,ia.BUTTON])&&(this._grid=this._getGridParams(),this._grid.hasGridSupport?(c(ja.GRID_NEW_GRID,i.grid.hasNewGrid),c(ja.GRID_NEW_ROW,!i.grid.hasNewGrid||"N"===d(ja.GRID_NEW_GRID)),c(ja.GRID_COLUMN,!0),c(ja.GRID_NEW_COLUMN,""===d(ja.GRID_COLUMN)&&"N"===d(ja.GRID_NEW_ROW)),j="Y"===d(ja.GRID_NEW_GRID)||"Y"===d(ja.GRID_NEW_ROW)||""!==d(ja.GRID_COLUMN)||"Y"===d(ja.GRID_NEW_COLUMN),c(ja.GRID_COLUMN_SPAN,j&&i.grid.hasColumnSpan),c(ja.GRID_COLUMN_CSS_CLASSES,j&&i.grid.hasColumnCssClasses),c(ja.GRID_COLUMN_ATTRIBUTES,j&&i.grid.hasColumnAttributes)):(this._deleteProperty(ja.GRID_NEW_GRID),this._deleteProperty(ja.GRID_NEW_ROW),this._deleteProperty(ja.GRID_COLUMN),this._deleteProperty(ja.GRID_NEW_COLUMN),this._deleteProperty(ja.GRID_COLUMN_SPAN),this._deleteProperty(ja.GRID_COLUMN_CSS_CLASSES),this._deleteProperty(ja.GRID_COLUMN_ATTRIBUTES)),(this.typeId===ia.PAGE_ITEM||this.typeId===ia.BUTTON)&&(k=this._grid.hasGridSupport&&j&&"TABLE"===i.grid.type,c(ja.GRID_ROW_SPAN,k),c(ja.ELEMENT_FIELD_ALIGNMENT,k),this.typeId===ia.PAGE_ITEM&&(c(ja.LABEL_ALIGNMENT,k),c(ja.READ_ONLY_HTML_ATTRIBUTES,k&&i.grid.hasColumnAttributes),f=w(d(ja.FIELD_TEMPLATE)),c(ja.GRID_LABEL_COLUMN_SPAN,this._grid.hasGridSupport&&j&&f.hasLabelColumnSpan))),this.typeId===ia.REGION&&(e(ia.REGION,ja.PARENT_REGION),e(ia.PAGE_ITEM,ja.REGION),e(ia.BUTTON,ja.REGION)))},G.prototype._setProperties=function(a,b){var c;a=a||[];for(var d=0;d<a.length;d++){if(!_.hasOwnProperty(a[d].id))throw"Property "+a[d].id+" doesn't exist!";if(!this._properties.hasOwnProperty(a[d].id))throw"Property '"+_[a[d].id].prompt+"' ("+a[d].id+") not available for this component!";c=this._properties[a[d].id],a[d].oldValue=c._value,c._setValue(a[d].value,b)}},G.prototype.getProperty=function(a){return this._properties[a]},G.prototype.getProperties=function(){var a=[];return l(this._properties,function(b,c){a.push(c)}),a},G.prototype.duplicate=function(a){if(this._status===ma.DELETED)throw"Component has been deleted!";return this._duplicate(a)},G.prototype._duplicate=function(a,b){var c,d=aa[this.typeId],e=[];c=new G({component:this,previousComponent:this,values:a,parentId:b||this.parentId});for(var f=0;f<d.childComponentTypes.length;f++)if(d.childComponentTypes[f]!==ia.IR_SAVED_REPORT){e=I(d.childComponentTypes[f],{parentId:this.id},!1);for(var h=0;h<e.length;h++)e[h]._duplicate(g,c.id)}return c},G.prototype.remove=function(){this._remove(!1)},G.prototype._remove=function(a){function c(a,b,c){var d,e=b.split(c),f=new RegExp("^\\s*"+a+"\\s*$","i");for(d=0;d<e.length;d++)if(f.test(e[d])){e.splice(d,1);break}return e.join(c)}var d,e,f,g,h,j,k=aa[this.typeId],l=this,m=[],n=[];if(this._status!==ma.DELETED){if(va)throw"Page is read only!";if(this.isReadOnly())throw"Component is read only!";P(this,wa.DELETE);for(var o=0;o<k.childComponentTypes.length;o++){m=I(k.childComponentTypes[o],{parentId:this.id},!1);for(var p=0;p<m.length;p++)m[p]._remove(!0)}g=this.typeId===ia.BUILD_OPTION||this.typeId===ia.AUTHORIZATION?new RegExp("^[-!]?"+b.escapeRegExp(this.id)+"$"):this.id,this.typeId===ia.PAGE_ITEM&&(h=b.escapeRegExp(this.getProperty(ja.ITEM_NAME).getValue()));for(var o=0;o<k.refByProperties.length;o++){d=_[k.refByProperties[o]],"COMPONENT"===d.lovType?f={properties:[{id:d.id,value:g}]}:"ITEM"===d.type&&(f=d.multiValueDelimiter?{properties:[{id:d.id,value:new RegExp("(^|"+d.multiValueDelimiter+"|\\s)"+h+"($|"+d.multiValueDelimiter+"|\\s)","i")}]}:{properties:[{id:d.id,value:new RegExp("^"+h+"$","i")}]});for(var p=0;p<d.refByComponentTypes.length;p++)if(aa[d.refByComponentTypes[p]].parentId!==this.typeId){e=aa[d.refByComponentTypes[p]].properties[d.id],n=I(d.refByComponentTypes[p],f,!1);for(var q=0;q<n.length;q++)if("WEAK_NULL"===e.referenceOnDelete||"DB_NULL"===e.referenceOnDelete)j=n[q].getProperty(d.id),"ITEM"===d.type&&d.multiValueDelimiter?j.setValue(c(h,j.getValue(),d.multiValueDelimiter)):j.setValue("");else{if("WEAK_CASCADE"!==e.referenceOnDelete&&"DB_CASCADE"!==e.referenceOnDelete)throw i("DEL.REFERENCE_EXISTS",n[q].getDisplayTitle());"ITEM"===d.type&&d.multiValueDelimiter?(j=n[q].getProperty(d.id),j.setValue(c(h,j.getValue(),d.multiValueDelimiter)),""===j.getValue()&&n[q]._remove(!0)):n[q]._remove(!0)}}}this._status===ma.CREATED||a?delete ra[this.typeId][this.id]:this._setHasChanged({status:ma.DELETED}),l._callPluginCallback({action:la.REMOVED}),l._callComponentTypeCallback({action:la.REMOVED})}},G.prototype.move=function(a,b){if(this._status===ma.DELETED)throw"Component has already been deleted!";if(va)throw"Page is read only!";if(this.isReadOnly())throw"Component is read only!";P(this,wa.CHANGE),this._setProperties(b),this._move(a),this._callPluginCallback({properties:b}),this._callComponentTypeCallback({properties:b})},G.prototype._move=function(a){var b,c,d,e=this.typeId===ia.CLASSIC_RPT_COLUMN||this.typeId===ia.TAB_FORM_COLUMN?1:10,f=aa[this.typeId].seqPropertyId,h=a,i=!0;if(b=this.getSiblings(!0),b.length>0&&h){if(h instanceof G)for(d=0;d<b.length;d++)if(b[d].id===h.id&&b[d].typeId===h.typeId){this.seq=h.seq+e,i=!1;break}("last"===h||i)&&b[b.length-1].id!==this.id&&(h=b[b.length-1],this.seq=h.seq+e,i=!1)}for(i&&(h=g,this.seq=e),c=this.seq,this._properties[f]._setValue(this.seq,{checkReadOnly:!1}),d=0;d<b.length;d++)i?b[d].isReadOnly()?c=b[d].seq:b[d].id!==this.id&&(c+=e,b[d].getProperty(f).setValue(c)):b[d].id===h.id&&(i=!0)},G.prototype.getSiblings=function(b){var c,d,e,f=[];if(-1!==a.inArray(this.typeId,[ia.REGION,ia.PAGE_ITEM,ia.BUTTON])?(this.typeId===ia.REGION?(f[0]={typeId:ia.REGION,filter:{properties:[]}},this._properties.hasOwnProperty(ja.REGION_POSITION)&&f[0].filter.properties.push({id:ja.REGION_POSITION,value:this._properties[ja.REGION_POSITION]._value}),f[0].filter.properties.push({id:ja.PARENT_REGION,value:this._properties[ja.PARENT_REGION]._value})):this.typeId===ia.PAGE_ITEM||this.typeId===ia.BUTTON&&"BODY"===this._properties[ja.BUTTON_POSITION]._value?(f.push({typeId:ia.PAGE_ITEM,filter:{parentId:this.parentId}}),f.push({typeId:ia.BUTTON,filter:{parentId:this.parentId,properties:[{id:ja.BUTTON_POSITION,value:"BODY"}]}})):this.typeId===ia.BUTTON&&f.push({typeId:ia.BUTTON,filter:{parentId:this.parentId,filterFunction:function(){return"BODY"!==this.getProperty(ja.BUTTON_POSITION).getValue}}}),e=J(f)):(c={parentId:this.parentId,properties:[]},this.typeId===ia.PAGE_COMPUTATION||this.typeId===ia.APP_COMPUTATION?d=ja.COMPUTATION_POINT:this.typeId===ia.PAGE_PROCESS||this.typeId===ia.APP_PROCESS?d=ja.PROCESS_POINT:this.typeId===ia.BRANCH?d=ja.BRANCH_POINT:this.typeId===ia.DA_ACTION&&(d=ja.FIRE_WHEN_EVENT_RESULT_IS),d&&c.properties.push({id:d,value:this._properties[d]._value}),e=I(this.typeId,c)),!b)for(var g=0;g<e.length;g++)if(e[g].id===this.id){e.splice(g,1);break}return e},G.prototype.getParent=function(){return this.parentId?I(aa[this.typeId].parentId,{id:this.parentId},!1)[0]:g},G.prototype.getChilds=function(b,c,d){var e=a.extend(!0,{},c);return e.parentId=this.id,I(b,e,d)},G.prototype.getChildrenUntil=function(b,c,d){function e(a){if(aa[a].parentId===g)throw"Component Type Id "+a+" is not a child type of component type id "+h.typeId;return aa[a].parentId===h.typeId?a:e(aa[a].parentId)}var f,h=this,i=a.extend(!0,{},c),k=[];if(i.parentId=h.id,aa[b].parentId===h.typeId)return I(b,i,d);f=I(e(aa[b]),i,d);for(var l=0;j<f.length;l++)k=k.concat(f[l].getChildrenUntil(b,i,d));return k},G.prototype.getDisplayTitle=function(){return aa[this.typeId].displayPropertyId?k("POSTFIX.GLOBAL_PAGE",this.getProperty(aa[this.typeId].displayPropertyId).getDisplayValue(),this.isOnGlobalPage()):""},G.prototype.setDisplayTitle=function(a){return this.getProperty(aa[this.typeId].displayPropertyId).setValue(a)},G.prototype._copyToGlobal=function(){var a=this,b=ra[this.typeId][this.id];l(a,function(c,d){"_properties"===c?(b._properties={},l(a._properties,function(a,c){b._properties[a]=new F({component:b,propertyId:c})})):b[c]=a[c]})};var wa={CREATE:"create",DELETE:"delete",CHANGE:"change"},xa=null,ya=function(){var b={_forEach:function(a){for(var b in this.components)if(this.components.hasOwnProperty(b))for(var c in this.components[b])this.components[b].hasOwnProperty(c)&&a.call(this.components[b][c],b,c)},_restore:function(a,b,c,d){var e=null;return ra[a].hasOwnProperty(b)&&(e=new G({component:ra[a][b],isDetached:!0})),c===wa.CREATE?d._status!==ma.CREATED&&ra[a].hasOwnProperty(b)?ra[a][b]._status=d._status:ra[a][b]=new G({component:d,isDetached:!0}):c===wa.DELETE?e._status===ma.CREATED?delete ra[a][b]:ra[a][b]._status=ma.DELETED:d._copyToGlobal(),Q(e,ra[a][b]||null)},_undo:function(){var a=this,b=[];return this._forEach(function(c,d){var e;switch(this.operation){case wa.CREATE:e=wa.DELETE;break;case wa.DELETE:e=wa.CREATE;break;case wa.CHANGE:e=wa.CHANGE}b.push(a._restore(c,d,e,this.oldComponent))}),b},execute:function(){var a=[];N(),this._forEach(function(b,c){this.operation!==wa.DELETE&&(this.newComponent=new G({component:ra[b][c],isDetached:!0})),a.push(Q(this.oldComponent,this.newComponent))}),R(a),xa=null},undo:function(){O(),R(this._undo())},redo:function(){var a=this,b=[];O(),this._forEach(function(c,d){b.push(a._restore(c,d,this.operation,this.newComponent))}),R(b)},cancel:function(){N(),this._undo(),xa=null},label:function(){return this._label}};return{start:function(a,c){var d;if(va)throw"Page is read only!";return O(),d=Object.create(b),d._label=c||"",d.widget=a,d.components={},xa=d,d},message:function(b){var c,d,e,f=".MULTIPLE",g=a.extend({action:"",component:null,property:null,count:1},b),h="TRANSACTION."+g.action;switch(g.action){case pa.CHANGE:c=1===g.count?g.component.getDisplayTitle():i("MULTIPLE_COMPONENTS"),e=i(h,c,g.property.getMetaData().prompt);break;case pa.CREATE:1===g.count?(d="string"==typeof g.component?g.component:g.component.typeId,c=aa[d].title.singular):c=i("MULTIPLE_COMPONENTS"),e=i(h,c);break;default:1===g.count?c=g.component.getDisplayTitle():(h+=f,c=g.count),e=i(h,c)}return e}}}();return{COMP_TYPE:ia,PROP:ja,PROP_TYPE:oa,EVENT:ka,CALLBACK_ACTION:la,MESSAGE_ACTION:pa,Component:G,getComponents:I,getComponentsAdvanced:J,fullTextSearch:K,getItemsLov:L,getPagesLov:M,transaction:ya,hasChanged:S,saveChanges:T,getPageLockState:Z,lockPage:X,unlockPage:Y,getTemplateOptions:x,getTheme:t,getRegionTemplate:v,enquoteIdentifier:o,setStaticData:function(b){b=a.extend(!0,{displayGroups:{},properties:{},componentTypes:{},plugins:{},pluginCategories:{},events:{browser:[],apex:[],component:[],custom:[],lookupMap:{}},text:{},formatMasks:{numbers:[],dates:[]}},b),$=b.displayGroups,_=b.properties,aa=b.componentTypes,ba=b.pluginCategories,ca=b.events,da=b.formatMasks,p(b.plugins,"%0")},setSharedComponentData:function(b){a.extend(!0,{plugins:{}},b),ea=b;for(var c in ea.componentTypes)ea.componentTypes.hasOwnProperty(c)&&(aa[c].createUrl=ea.componentTypes[c].createUrl,aa[c].editUrl=ea.componentTypes[c].editUrl,aa[c].copyUrl=ea.componentTypes[c].copyUrl);for(var c in ea.userInterfaces)ea.userInterfaces.hasOwnProperty(c)&&(ea.userInterfaces[c].id=c,m(ea.userInterfaces[c],{globalPageId:""}));p(b.plugins,d.getMessage("MODEL.POSTFIX.PLUGIN"));for(var c in ea.themes)ea.themes.hasOwnProperty(c)&&(ea.themes[c].templates[ia.REGION_TEMPLATE][""]=ea.themes[c].templates[ia.REGION_TEMPLATE][0],delete ea.themes[c].templates[ia.REGION_TEMPLATE][0],ea.themes[c].templates[ia.FIELD_TEMPLATE][""]=ea.themes[c].templates[ia.FIELD_TEMPLATE][0],delete ea.themes[c].templates[ia.FIELD_TEMPLATE][0],m(ea.themes[c].defaultTemplates,{page:"",dialog:"",region:"",field:"",button:"",report:"",ir:"",list:"",breadcrumb:"",calendar:""}));q(),r(),a(document).trigger("modelConfigLoaded");for(var e in b.components)if(b.components.hasOwnProperty(e))for(var c=0;c<b.components[e].length;c++)new G({typeId:e,component:b.components[e][c]})},setComponentData:function(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=0;c<a[b].length;c++)new G({typeId:b,component:a[b][c]})},setComponentTypeCallback:function(a,b){aa[a].callback=b},setPluginCallback:function(a,b,c){aa[a].pluginType.plugins[b].callback=c},getPageTemplate:u,getNavListTemplateId:function(){var a=ra[ia.PAGE][ga],b="";return A()||"L"!==a.getProperty(ja.PAGE_NAVIGATION_TYPE).getValue()||(a.getProperty(ja.NAVIGATION_LIST_TEMPLATE)?b=a.getProperty(ja.NAVIGATION_LIST_TEMPLATE).getValue():ha.navList&&(b=ha.navList.templateId||"")),b},getNavListId:function(){var a=ra[ia.PAGE][ga],b="";return A()||"L"!==a.getProperty(ja.PAGE_NAVIGATION_TYPE).getValue()||(a.getProperty(ja.NAVIGATION_LIST)?b=a.getProperty(ja.NAVIGATION_LIST).getValue():ha.navList&&(b=ha.navList.listId||"")),b},getTabSetId:function(){var a=ra[ia.PAGE][ga],b="";return A()||"T"!==a.getProperty(ja.PAGE_NAVIGATION_TYPE).getValue()||(b=a.getProperty(ja.STANDARD_TAB_SET).getValue()),b},getRegionTemplates:function(){return t().templates[ia.REGION_TEMPLATE]},getButtonTemplates:function(){return t().templates[ia.BUTTON_TEMPLATE]},getThemeIcons:function(){return t().icons||{}},getParsingSchema:function(){return ea.parsingSchema},getPrimaryLanguage:function(){return ea.primaryLanguage},getDisplayGroup:function(a){return $[a]},getComponentType:function(a){return aa[a]},getProperty:function(a){return _[a]},getPluginProperty:function(a,b,c){var d=(a===ia.REGION?ia.REGION_PLUGIN_ATTR:a)+"_"+b+"_"+c;for(var e in _)if(_.hasOwnProperty(e)&&_[e].name===d)return _[e];return g},getLovTitle:function(a,b,c){var d=aa[a].properties[b].nullText||"",e=_[b];return"STATIC"===e.lovType?e.lovValuesMap.hasOwnProperty(c)&&(d=e.lovValues[e.lovValuesMap[c]].d):"EVENTS"===e.lovType&&ca.lookupMap.hasOwnProperty(c)&&(d=ca.lookupMap[c].d),d},getErrorComponents:function(){var a,b={};for(var c in aa)aa.hasOwnProperty(c)&&(a=I(c,{hasErrors:!0}),a.length>0&&(b[c]=a));return b},observer:function(b,c,d,e){ta.push({widget:b,filter:a.extend({},{properties:[],events:[]},c),callback:d,sendInBulk:e,pendingNotifications:[]})},unobserver:function(a,b,c){for(var d,e,f=0;f<ta.length;f++)ta[f].widget===a&&(d=ta[f].filter,b.hasOwnProperty("component")?b.component instanceof G&&d.component instanceof G?b.component.typeId===d.component.typeId&&b.component.id===d.component.id&&(e=!0):b.component.typeId===d.component.typeId&&(e=!0):e=!0,e&&b.hasOwnProperty("properties")&&(e=d.properties.join(",")===b.properties.join(",")),e&&b.hasOwnProperty("events")&&(e=d.events.join(",")===b.events.join(",")),e&&c&&(e=ta[f].callback===c),e&&(ta.splice(f,1),f--))},setCurrentAppId:function(a){fa=a},getCurrentAppId:function(){return fa},setCurrentPageId:function(a){var b=ra[ia.PAGE][a]._lock;ga=a+"",ha=ea.userInterfaces[ra[ia.PAGE][ga].getProperty(ja.USER_INTERFACE).getValue()],va=ua.isReadOnly||b!==!1&&!b.isLockedByCurrentUser?!0:!1,H(!0),W()},getCurrentPageId:function(){return ga},getGlobalPageId:function(){return ha.globalPageId},isGlobalPage:A,isPageReadOnly:function(){return va},clear:function(){$=g,_=g,aa=g,ba=g,ca=g,da=g,ea=g,ra={},sa={},fa=g,ga=g,ha=g,va=!0;for(var a=0;a<ta.length;a++)ta[a].filter.component instanceof G&&(ta.splice(a,1),a--)},init:function(a){ua=a},getAll:function(){return{displayGroups:$,properties:_,componentTypes:aa,pluginCategories:ba,sharedComponents:ea,components:ra,baseComponents:sa,observers:ta}}}}(apex.jQuery,apex.util,apex.locale,apex.lang,apex.server,apex.debug);